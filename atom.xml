<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yushen&#39;s Note</title>
  
  
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2022-03-17T10:01:46.851Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Yushen_L</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AmeSim学习笔记</title>
    <link href="http://yoursite.com/posts/simulation/AmeSim_solver.html"/>
    <id>http://yoursite.com/posts/simulation/AmeSim_solver.html</id>
    <published>2022-02-28T08:30:20.000Z</published>
    <updated>2022-03-17T10:01:46.851Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>软件使用方法比较简单不做介绍，本文主要记录个人项目中使用到的一些模型资料方便翻找（均可在help说明书中找到）</p></blockquote><h4 id="方程求解"><a class="markdownIt-Anchor" href="#方程求解"></a> 方程求解</h4><h5 id="连续性方程组"><a class="markdownIt-Anchor" href="#连续性方程组"></a> 连续性方程组</h5><p>常见的显式微分方程可通过**Explicit Runge-Kutta（显式龙格库塔）**求解，但该方法不适用于隐式方程。</p><p>当控制方程组中包含隐式微分代数方程或隐式微分方程式，归类为<strong>微分代数方程</strong>（DAE），其目标解为使得残差 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span></span></span> 值趋向于0。linear multistep常被用于求解此类问题。</p><p>例子：关于处理孔隙流动</p><p>小孔流动公式通常为：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mi>A</mi><msqrt><mfrac><mrow><mn>2</mn><mi mathvariant="normal">Δ</mi><mi>P</mi></mrow><mi>ρ</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">Q=C_qA\sqrt{\frac{2\Delta P}{\rho}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.04em;vertical-align:-1.1661799999999998em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord mathdefault">A</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8738200000000003em;"><span class="svg-align" style="top:-5em;"><span class="pstrut" style="height:5em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">ρ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.8338200000000002em;"><span class="pstrut" style="height:5em;"></span><span class="hide-tail" style="min-width:1.02em;height:3.08em;"><svg width='400em' height='3.08em' viewBox='0 0 400000 3240' preserveAspectRatio='xMinYMin slice'><path d='M473,2793c339.3,-1799.3,509.3,-2700,510,-2702c3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606zM1001 80H400000v40H1017z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1661799999999998em;"><span></span></span></span></span></span></span></span></span></span></p><p>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">C_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>为定值，此时方程为显示代数方程</p><p>但如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>q</mi></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi>Q</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C_q = f(|Q|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathdefault">Q</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>，则该式为隐式代数方程需要迭代求解。此时求解目标为</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi><mo>=</mo><mi>Q</mi><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi>Q</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo><mi>A</mi><msqrt><mfrac><mrow><mn>2</mn><mi mathvariant="normal">Δ</mi><mi>P</mi></mrow><mi>ρ</mi></mfrac></msqrt><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\epsilon = Q-f(|Q|)A\sqrt{\frac{2\Delta P}{\rho}}\rightarrow0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.04em;vertical-align:-1.1661799999999998em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathdefault">Q</span><span class="mord">∣</span><span class="mclose">)</span><span class="mord mathdefault">A</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8738200000000003em;"><span class="svg-align" style="top:-5em;"><span class="pstrut" style="height:5em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">ρ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.8338200000000002em;"><span class="pstrut" style="height:5em;"></span><span class="hide-tail" style="min-width:1.02em;height:3.08em;"><svg width='400em' height='3.08em' viewBox='0 0 400000 3240' preserveAspectRatio='xMinYMin slice'><path d='M473,2793c339.3,-1799.3,509.3,-2700,510,-2702c3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606zM1001 80H400000v40H1017z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1661799999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;软件使用方法比较简单不做介绍，本文主要记录个人项目中使用到的一些模型资料方便翻找（均可在help说明书中找到）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;方程求解&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#</summary>
      
    
    
    
    <category term="AMEsim" scheme="http://yoursite.com/categories/AMEsim/"/>
    
    
    <category term="仿真" scheme="http://yoursite.com/tags/%E4%BB%BF%E7%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>TCL-视图</title>
    <link href="http://yoursite.com/posts/database/view.html"/>
    <id>http://yoursite.com/posts/database/view.html</id>
    <published>2022-01-07T13:43:17.000Z</published>
    <updated>2022-03-17T14:24:17.527Z</updated>
    
    <content type="html"><![CDATA[<h5 id="创建视图"><a class="markdownIt-Anchor" href="#创建视图"></a> 创建视图</h5><blockquote><p>将sql语句重用化，简化命令。</p></blockquote><p>​基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> ViewName</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">select</span> querylist <span class="comment">#将该部分查询结果作为视图</span></span><br><span class="line"><span class="keyword">from</span> Table1 ConnectType</span><br><span class="line"><span class="keyword">join</span> Table2</span><br><span class="line"><span class="keyword">on</span> Connection_requirements</span><br><span class="line"><span class="keyword">where</span> conditions</span><br><span class="line">...;<span class="comment">#查询语句</span></span><br></pre></td></tr></table></figure><p>​示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询姓名中包含a字符的员工名、部门名和工种信息</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> info</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">join</span> departments d <span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">join</span> jobs j <span class="keyword">on</span> e.job_id = j.job_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> info </span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%a%'</span>;</span><br></pre></td></tr></table></figure><h5 id="修改视图"><a class="markdownIt-Anchor" href="#修改视图"></a> 修改视图</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> ViewName</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">...<span class="comment">#查询语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方式二</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> </span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">...<span class="comment">#查询语句</span></span><br></pre></td></tr></table></figure><h5 id="删除视图"><a class="markdownIt-Anchor" href="#删除视图"></a> 删除视图</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> ViewName;</span><br></pre></td></tr></table></figure><h5 id="查看视图"><a class="markdownIt-Anchor" href="#查看视图"></a> 查看视图</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc ViewName</span><br></pre></td></tr></table></figure><h5 id="更新视图数据"><a class="markdownIt-Anchor" href="#更新视图数据"></a> 更新视图数据</h5><blockquote><p>更新视图中的数据（非连接逻辑）</p></blockquote><p>基本语法与普通表相同（表名替换为视图名）</p><p>注意：</p><ol><li><p>以下视图(数据)不可更新(插入、修改、删除)</p><ul><li><p>包含分组函数、<code>distinct</code>、<code>group by</code> 、<code>having</code>、<code>union</code>、<code>union all</code>的视图</p></li><li><p>常量视图、连接得到的视图、select 中包含子查询的视图</p></li><li><p>源自不可更新视图</p></li></ul></li></ol><p>​2. 修改内容同步到源表</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;创建视图&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#创建视图&quot;&gt;&lt;/a&gt; 创建视图&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;将sql语句重用化，简化命令。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;​	基本语法：&lt;/p&gt;
&lt;fig</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>TCL-事务管理</title>
    <link href="http://yoursite.com/posts/database/TCL_.html"/>
    <id>http://yoursite.com/posts/database/TCL_.html</id>
    <published>2022-01-07T12:48:17.000Z</published>
    <updated>2022-03-17T14:12:00.559Z</updated>
    
    <content type="html"><![CDATA[<h4 id="事务创建"><a class="markdownIt-Anchor" href="#事务创建"></a> 事务创建</h4><h5 id="创建事务"><a class="markdownIt-Anchor" href="#创建事务"></a> 创建事务</h5><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit = <span class="number">0</span>; <span class="comment">#开始 事务</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>; <span class="comment">#可省略</span></span><br><span class="line">SQL_Statements1;</span><br><span class="line">SQL_Statements2;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">commit</span>; <span class="comment">#结束 可使用回滚语句：rollback;</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：在事务执行过程中的语句均改变表中数据，当使用<code>commit</code>结束时，结束事务并永久改变数据。使用<code>roll back</code>时，结束事务，放弃事务中对数据的改变，数据恢复事务开始前。</p></blockquote><h5 id="保存点"><a class="markdownIt-Anchor" href="#保存点"></a> 保存点</h5><p><code>save point</code> 可配合<code>roll back</code> 使用，结束事务并滚回到保存点位置</p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line">SQL_Statements1;</span><br><span class="line"><span class="keyword">savepoint</span> SP_name;</span><br><span class="line">SQL_Statements2;</span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> SP_name; <span class="comment">#回滚到保存点SP_name</span></span><br></pre></td></tr></table></figure><hr /><h4 id="事务并发"><a class="markdownIt-Anchor" href="#事务并发"></a> 事务并发</h4><h5 id="读取问题"><a class="markdownIt-Anchor" href="#读取问题"></a> 读取问题</h5><p>当多个事务并发时，未设置隔离级别时可能出现以下问题：</p><ol><li>脏读：读取了被 <code>roll back</code> 的数据</li><li>不可重复读：多次读取的结果不相同</li><li>幻读：</li></ol><h5 id="隔离级别"><a class="markdownIt-Anchor" href="#隔离级别"></a> 隔离级别</h5><p>MySQL 支持4种隔离级别，默认为 <code>repeatable read</code></p><p>Oracle 支持2种（下表2、4），默认为<code>read committed</code></p><table>    <tr>        <td>read uncommitted</td>        <td>允许读取未被提交的变更，所有错误均可能出现</td>    </tr>    <tr>        <td>read committed</td>        <td>允许读取已被提交的变更，可避免脏读</td>    </tr>      <tr>        <td>repeatable read</td>        <td>可保证多次读取字段的值相同，避免脏读、不可重复读</td>    </tr>     <tr>        <td>serializable</td>        <td>串行化，事务操作表时，禁止其他事务对该表操作，性能低</td>    </tr> </table><p>隔离级别设置命令：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#仅对当前连接有效</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> ...</span><br><span class="line"><span class="comment">#全局隔离级别</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> ...</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;事务创建&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#事务创建&quot;&gt;&lt;/a&gt; 事务创建&lt;/h4&gt;
&lt;h5 id=&quot;创建事务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#创建事务&quot;&gt;&lt;/a&gt; 创建事务&lt;/h5</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>DDL-约束介绍</title>
    <link href="http://yoursite.com/posts/database/DDL_constraint.html"/>
    <id>http://yoursite.com/posts/database/DDL_constraint.html</id>
    <published>2022-01-07T08:00:17.000Z</published>
    <updated>2022-03-17T14:02:20.109Z</updated>
    
    <content type="html"><![CDATA[<p>约束用于限制表中数据，确保数据的可靠性</p><h4 id="常见约束"><a class="markdownIt-Anchor" href="#常见约束"></a> 常见约束</h4><table>    <tr>        <td>类型</td>        <td>功能</td>    </tr>    <tr>        <td>not null</td>        <td>非空约束，保证数据不为null</td>    </tr>    <tr>        <td>default</td>        <td>默认约束，在不输入时保证字段有默认值</td>    </tr>    <tr>        <td>primary key</td>        <td>主键，保证字段唯一性，且非空</td>    </tr>    <tr>        <td>unique</td>        <td>唯一，保证字段唯一性，但可以为null（null只能有一个）</td>    </tr>    <tr>        <td>foreign key</td>        <td>外键，显示两表关系，保证字段值来自于主表关联列的值</td>    </tr>    <tr>        <td>check</td>        <td>检查，用于对字段值添加限制（mysql中不支持：无效但不报错）</td>    </tr></table><hr /><h4 id="添加约束"><a class="markdownIt-Anchor" href="#添加约束"></a> 添加约束</h4><h5 id="创建表时添加"><a class="markdownIt-Anchor" href="#创建表时添加"></a> 创建表时添加</h5><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> TableName(</span><br><span class="line">column1 type1 constraint1, <span class="comment">#此时constraint1、2为列约束</span></span><br><span class="line">    column2 type2 constraint2,</span><br><span class="line">    <span class="keyword">constraint</span> constName constType [<span class="keyword">references</span> Table1(column3)] <span class="comment">#此时constName为表约束</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p><code>[]</code>内类容为使用<code>foreign key</code>时需要添加的关联列</p></blockquote><ol><li><p>列级约束，所有约束均可按照列级约束添加，但<code>foreign key</code>外键约束无效。</p></li><li><p>表级约束：除<code>not null</code>、<code>default</code>外的约束，均可作为表级约束。</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> students;</span><br><span class="line"><span class="keyword">use</span> students;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> major(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    majorName <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#列级约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stuinfo(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    stuName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    gender <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">check</span>(gender=<span class="string">'男'</span> <span class="keyword">or</span> gender=<span class="string">'女'</span>),<span class="comment">#mysql中无效</span></span><br><span class="line">    seat <span class="built_in">int</span> <span class="keyword">unique</span>,</span><br><span class="line">    age <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">18</span>,</span><br><span class="line">    majorId <span class="built_in">int</span> <span class="keyword">references</span> major(<span class="keyword">id</span>) <span class="comment">#此处列级外键无效</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#表级约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stuinfo(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> ,</span><br><span class="line">    stuName <span class="built_in">varchar</span>(<span class="number">20</span>) ,</span><br><span class="line">    gender <span class="built_in">char</span>(<span class="number">1</span>) ,</span><br><span class="line">    seat <span class="built_in">int</span> ,</span><br><span class="line">    age <span class="built_in">int</span> ,</span><br><span class="line">    majorId <span class="built_in">int</span>,  </span><br><span class="line">    <span class="keyword">constraint</span> pk primary <span class="keyword">key</span>(<span class="keyword">id</span>),</span><br><span class="line">    <span class="keyword">constraint</span> uq <span class="keyword">unique</span>(seat),</span><br><span class="line">    <span class="keyword">constraint</span> ck <span class="keyword">check</span>(gender=<span class="string">'男'</span> <span class="keyword">or</span> gender=<span class="string">'女'</span>),</span><br><span class="line">    <span class="keyword">constraint</span> fk_stu_major <span class="keyword">foreign</span> <span class="keyword">key</span>(majorid)  <span class="keyword">references</span> major(<span class="keyword">id</span>) </span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ol><h5 id="在修改过程中添加-删除"><a class="markdownIt-Anchor" href="#在修改过程中添加-删除"></a> 在修改过程中添加、删除</h5><ul><li>添加约束语法</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#约束添加</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tablename <span class="keyword">modify</span> <span class="keyword">column</span> column1 <span class="keyword">type</span> constraint1;<span class="comment">#添加列级约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tablename <span class="keyword">add</span>  constraint1(<span class="keyword">column</span>); <span class="comment">#添加表级约束</span></span><br></pre></td></tr></table></figure><blockquote><p>其中<code>constraint1</code>代表对应约束语句，具体格式见上文</p></blockquote><ul><li><p>删除约束语法</p><p>列级约束删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除非空约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">modify</span> <span class="keyword">column</span> CloumnName <span class="keyword">type</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除默认约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">modify</span> <span class="keyword">column</span> CloumnName <span class="keyword">type</span>;</span><br></pre></td></tr></table></figure><p>表级约束删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">drop</span> constraint_Type constraint_Name；</span><br></pre></td></tr></table></figure><blockquote><p>由于 <code>primary</code>只有一个，因此可省略<code>constraint_Name</code></p></blockquote></li></ul><h5 id="特别注意"><a class="markdownIt-Anchor" href="#特别注意"></a> 特别注意</h5><ul><li><p>主键</p><ul><li><p>同一个表中，<code>unique</code>可以有多个，但<code>primary key</code>只能有一个</p></li><li><p>可以将多个列组合成一个主键，其格式如</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">constraint pk primary key(column1,column2)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>外键</p><ul><li>在从表中设置外键关系</li><li>从表列于主表关联列的类型要相同（或者兼容）</li><li>主表中的关联列必须是一个键（一般为<code>primary key</code>或者<code>unique</code>）</li></ul></li></ul><hr /><h4 id="标识列"><a class="markdownIt-Anchor" href="#标识列"></a> 标识列</h4><p>与约束类似，在创建表时添加：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置自增长标识列</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> TableName(</span><br><span class="line">ColumnName <span class="keyword">type</span> <span class="keyword">unique</span> auto_increment,</span><br><span class="line">    ColumnName2 type2</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置增长步长</span></span><br><span class="line"><span class="keyword">set</span> auto_increment_increment = N;</span><br></pre></td></tr></table></figure><p>在修改时添加、删除：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加标识列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tablename <span class="keyword">modify</span> <span class="keyword">column</span> column1 <span class="keyword">type</span> constraint1 auto_increment;</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除标识列（即修改后不添加标识）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">modify</span> <span class="keyword">column</span> CloumnName <span class="keyword">type</span> constraint1;</span><br></pre></td></tr></table></figure><blockquote><p>标识列必须为一个<code>key</code>(如<code>primary</code>,<code>unique</code>)</p><p>一个表中仅能有一个自增长列</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;约束用于限制表中数据，确保数据的可靠性&lt;/p&gt;
&lt;h4 id=&quot;常见约束&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#常见约束&quot;&gt;&lt;/a&gt; 常见约束&lt;/h4&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;类型&lt;/td&gt;
     </summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>DML-管理数据（记录）</title>
    <link href="http://yoursite.com/posts/database/DML_add.html"/>
    <id>http://yoursite.com/posts/database/DML_add.html</id>
    <published>2022-01-06T15:00:00.000Z</published>
    <updated>2022-03-17T13:55:55.713Z</updated>
    
    <content type="html"><![CDATA[<h4 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h4><p>使用<code>insert into</code>添加数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TableName(column1,column2,...,columnN)</span><br><span class="line"><span class="keyword">values</span> (value1,value2,...,valueN);</span><br></pre></td></tr></table></figure><ol><li><p>插入的值类型要与列的类型相同（或兼容）</p></li><li><p>在表中插入数据时，若没有指定某列，视为<code>null</code>；指定的列可以通过输入值输入<code>null</code>。若该列不允许<code>null</code>，则报错。额</p></li><li><p>输入过程中，指定列的顺序不要求与表中顺序一致。省略列名时，默认按照表中列的顺序依次输入。</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty</span><br><span class="line"><span class="keyword">values</span> (<span class="number">18</span>,<span class="string">'张飞'</span>,<span class="string">'男'</span>,<span class="literal">null</span>,<span class="string">'119'</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#包含子查询</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(<span class="keyword">name</span>,phone)</span><br><span class="line"><span class="keyword">select</span> boyName,<span class="string">'110'</span></span><br><span class="line"><span class="keyword">from</span> boys </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">id</span>&lt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure></li></ol><blockquote><ul><li>方式一支持输入多行、子查询</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式二(使用较少)</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TableName</span><br><span class="line"><span class="keyword">set</span> column1=value1,...,columnN=valueN;</span><br></pre></td></tr></table></figure><hr /><h4 id="更改数据"><a class="markdownIt-Anchor" href="#更改数据"></a> 更改数据</h4><p><strong>单表修改</strong></p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> TableName</span><br><span class="line"><span class="keyword">set</span> column1=value1,...,columnN=valueN</span><br><span class="line"><span class="keyword">where</span> condition_statement</span><br></pre></td></tr></table></figure><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> sql_safe_updates = <span class="number">0</span>;    </span><br><span class="line"><span class="keyword">update</span> beauty</span><br><span class="line"><span class="keyword">set</span> phone = <span class="string">'13888888'</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'张%'</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>当数据库处于安全保护模式下，修改数据将报错，可通过命令<code>set sql_safe_updates = 0;</code>关闭安全模式</p></blockquote><p><strong>多表修改</strong></p><p>根据一个表的信息，修改另外一个表的数据</p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#99语法</span></span><br><span class="line"><span class="keyword">update</span> TableName1</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> TableName2</span><br><span class="line"><span class="keyword">on</span> connect_condition</span><br><span class="line"><span class="keyword">set</span> column1=value1,...,columnN=valueN</span><br><span class="line"><span class="keyword">where</span> condition_statement</span><br></pre></td></tr></table></figure><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将张无忌的cp的电话修改为114</span></span><br><span class="line"><span class="keyword">update</span> boys bo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> beauty b</span><br><span class="line"><span class="keyword">on</span> b.boyfriend_id = bo.id</span><br><span class="line"><span class="keyword">set</span> b.phone = <span class="string">'114'</span></span><br><span class="line"><span class="keyword">where</span> bo.boyName = <span class="string">'张无忌'</span>;</span><br></pre></td></tr></table></figure></li></ul><hr /><h4 id="删除数据"><a class="markdownIt-Anchor" href="#删除数据"></a> 删除数据</h4><p><strong>单表删除数据</strong></p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> TableName</span><br><span class="line"><span class="keyword">where</span> condition_statement <span class="comment">#无条件时，整表删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方式二</span></span><br><span class="line"><span class="keyword">truncate</span> TableName <span class="comment">#整表删除</span></span><br></pre></td></tr></table></figure><blockquote><p>删除数据时整行删除</p><ul><li>使用<code>delete</code>删除时，自增长列的值从断点开始；<code>truncate</code>删除时自增长列的值从1开始；</li><li>使用<code>delete</code>删除时有返回值，<code>truncate</code>删除，时无返回值。</li><li>使用<code>delete</code>删除时可以滚回，<code>truncate</code>删除，时不能滚回</li></ul></blockquote><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> beauty</span><br><span class="line"><span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">'%9%'</span>;</span><br></pre></td></tr></table></figure></li></ul><p><strong>多表删除</strong></p><p>根据一个表的信息，修改另外一个表的数据</p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#99语法</span></span><br><span class="line"><span class="keyword">delete</span> TableNames <span class="comment">#delete后应写需要删除数据的所有表的表名</span></span><br><span class="line"><span class="keyword">from</span> TableName1</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> TableName2</span><br><span class="line"><span class="keyword">on</span> connect_condition</span><br><span class="line"><span class="keyword">where</span> condition_statement</span><br></pre></td></tr></table></figure><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除黄晓明及其cp的信息</span></span><br><span class="line"><span class="keyword">delete</span> b,bo</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> boys bo</span><br><span class="line"><span class="keyword">on</span> b.boyfriend_id = bo.id</span><br><span class="line"><span class="keyword">where</span> bo.boyName = <span class="string">'黄晓明'</span>;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;插入数据&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#插入数据&quot;&gt;&lt;/a&gt; 插入数据&lt;/h4&gt;
&lt;p&gt;使用&lt;code&gt;insert into&lt;/code&gt;添加数据&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>DDL-数据类型</title>
    <link href="http://yoursite.com/posts/database/DDL_type.html"/>
    <id>http://yoursite.com/posts/database/DDL_type.html</id>
    <published>2022-01-06T13:42:17.000Z</published>
    <updated>2022-03-17T14:01:20.526Z</updated>
    
    <content type="html"><![CDATA[<h4 id="数值类型"><a class="markdownIt-Anchor" href="#数值类型"></a> 数值类型</h4><h5 id="整形"><a class="markdownIt-Anchor" href="#整形"></a> <strong>整形</strong></h5><table>    <tr >        <td>类型名称</td>        <td>字节大小</td>    </tr>    <tr >        <td>tinyint</td>        <td>1</td>    </tr>    <tr >        <td>smallint</td>        <td>2</td>    </tr>    <tr >        <td>mediumint</td>        <td>3</td>    </tr>    <tr >        <td>int</td>        <td>4</td>    </tr>    <tr >        <td>bigint</td>        <td>8</td>    </tr></table><ul><li><p>设置符号类型</p><p>默认为无符号，在数据类型后添加<code>unsigned</code>设置为无符号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> TableName(</span><br><span class="line">    num1 <span class="built_in">int</span>,<span class="comment">#有符号</span></span><br><span class="line">    num2 <span class="built_in">int</span> <span class="keyword">unsigned</span><span class="comment"># 无符号</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul><h5 id="小数"><a class="markdownIt-Anchor" href="#小数"></a> 小数</h5><ul><li><p><strong>浮点型</strong></p><table>    <tr >        <td>类型格式</td>        <td>字节大小</td>    </tr>    <tr >        <td>float(M,D)</td>        <td>4</td>    </tr>    <tr >        <td>double(M,D)</td>        <td>8</td>    </tr></table></li></ul><blockquote><p>其中（M，D）可以省略。不省略时，M代表数字的总长度，D为小数部分长度。</p></blockquote><ul><li><p><strong>定点型</strong></p><table>    <tr >        <td>类型格式</td>        <td>字节大小</td>    </tr>    <tr >        <td>decimal(M,D)</td>        <td>M+2</td>    </tr></table></li></ul><blockquote><p>当精度要求高时，推荐使用定点型</p><p>使用<code>decimal</code>时，M的默认值为10，D的默认值为0</p></blockquote><h4 id="字符型"><a class="markdownIt-Anchor" href="#字符型"></a> 字符型</h4><ul><li><p><strong>短文本类型</strong></p><table>    <tr >        <td>类型格式</td>        <td>上限字符长度</td>    </tr>    <tr >        <td>char(M)</td>        <td>M</td>    </tr>    <tr >        <td>varchar(M)</td>        <td>M</td>    </tr></table>其中`char`类型为固定(存储空间)长度字符，`varchar`为可变长度字符。其中`char`效率更高</li><li><p><strong>长字符</strong></p><table>    <tr >        <td>类型格式</td>        <td>一般用途</td>    </tr>    <tr >        <td>text</td>        <td>长文本</td>    </tr>    <tr >        <td>blob</td>        <td>较大的二进制字符串（如图片）</td>    </tr></table></li><li><p><strong>其他字符类型</strong></p><table>    <tr >        <td>类型格式</td>        <td>一般用途</td>    </tr>    <tr >        <td>enum</td>        <td>指定输入内容（只能输入单个）</td>    </tr>    <tr >        <td>set</td>        <td>指定输入内容（可输入多个）</td>    </tr></table><p>使用方法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#enum类型</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tablename(</span><br><span class="line"> column1 enum(<span class="string">'char1'</span>,<span class="string">'char2'</span>,<span class="string">'charN'</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">#set类型</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tablename(</span><br><span class="line"> column1 <span class="keyword">set</span>(<span class="string">'char1'</span>,<span class="string">'char2'</span>,<span class="string">'charN'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>注意：列表内容均不区分大小写</p></blockquote></li></ul><h4 id="日期型"><a class="markdownIt-Anchor" href="#日期型"></a> 日期型</h4><table>    <tr >        <td>类型格式</td>        <td>保存内容</td>    </tr>    <tr >        <td>year</td>        <td>仅年份</td>    </tr>    <tr >        <td>date</td>        <td>仅日期</td>    </tr>    <tr >        <td>time</td>        <td>仅时间</td>    </tr>    <tr >        <td>datetime</td>        <td>时间与日期（绝对）</td>    </tr>    <tr >        <td>timestamp</td>        <td>时间与日期（根据时区等因素改变）</td>    </tr> </table><ul><li><p><code>datetime</code></p><p>8字节，年份范围1000-9999</p></li><li><p><code>timestamp</code></p><p>4字节，年份范围1970-2038</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;数值类型&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#数值类型&quot;&gt;&lt;/a&gt; 数值类型&lt;/h4&gt;
&lt;h5 id=&quot;整形&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#整形&quot;&gt;&lt;/a&gt; &lt;strong&gt;整形&lt;/</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>DDL-表管理</title>
    <link href="http://yoursite.com/posts/database/DDL_database.html"/>
    <id>http://yoursite.com/posts/database/DDL_database.html</id>
    <published>2022-01-06T12:30:00.000Z</published>
    <updated>2022-03-17T13:59:14.510Z</updated>
    
    <content type="html"><![CDATA[<h4 id="创建表"><a class="markdownIt-Anchor" href="#创建表"></a> 创建表</h4><p>基本语法:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>] Table_Name(</span><br><span class="line">    ColumnName1 <span class="keyword">Type</span>[(<span class="keyword">length</span>) constraint1 ]</span><br><span class="line">    ColumnName2 <span class="keyword">Type</span>[(<span class="keyword">length</span>) constraint2 ]</span><br><span class="line">    ColumnName3 <span class="keyword">Type</span>[(<span class="keyword">length</span>) constraint3 ]</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p><code>[]</code>内语句为可选语句，<code>()</code>符号不可省略</p><p>注意：当Type为数据类型时，()内数字指显示长度，而不是字节长度</p></blockquote><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> book(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>,</span><br><span class="line">    bName <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    price <span class="keyword">double</span>,</span><br><span class="line">    authorId <span class="built_in">int</span>,</span><br><span class="line">    publishDate datetime</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul><h4 id="修改表"><a class="markdownIt-Anchor" href="#修改表"></a> 修改表</h4><ul><li><p>修改列名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">change</span> <span class="keyword">column</span> columnName New_columnName <span class="keyword">Type</span>;</span><br></pre></td></tr></table></figure></li><li><p>修改列的类型或约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">modify</span> <span class="keyword">column</span> columnName <span class="keyword">Type</span>;</span><br></pre></td></tr></table></figure></li><li><p>添加列、删除列</p><ul><li>添加</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">add</span> <span class="keyword">column</span> columnName <span class="keyword">Type</span>;</span><br></pre></td></tr></table></figure><ul><li>删除</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">drop</span> <span class="keyword">column</span> columnName;</span><br></pre></td></tr></table></figure></li><li><p>修改表名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> TableName <span class="keyword">rename</span> <span class="keyword">to</span> New_TableName;</span><br></pre></td></tr></table></figure></li></ul><h4 id="复制表"><a class="markdownIt-Anchor" href="#复制表"></a> 复制表</h4><ul><li><p>复制表格结构</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Copy_Table <span class="keyword">like</span> TableName;</span><br></pre></td></tr></table></figure><blockquote><p>创建一个结构与<code>TableName</code>相同的表Copy_Table</p></blockquote></li><li><p>复制表格结构及数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Copy_Table </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TableName;</span><br></pre></td></tr></table></figure><blockquote><p>通过子查询的方式获取<code>TableName</code>中的数据（可通过<code>where</code>等对表格数据处理后复制）</p></blockquote></li></ul><h4 id="删除表"><a class="markdownIt-Anchor" href="#删除表"></a> <strong>删除表</strong></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] TableName;</span><br></pre></td></tr></table></figure><h4 id=""><a class="markdownIt-Anchor" href="#"></a> </h4>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;创建表&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#创建表&quot;&gt;&lt;/a&gt; 创建表&lt;/h4&gt;
&lt;p&gt;基本语法:&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-连接查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_link_query.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_link_query.html</id>
    <published>2021-12-28T07:25:00.000Z</published>
    <updated>2022-03-17T13:26:26.658Z</updated>
    
    <content type="html"><![CDATA[<h4 id="连接查询语法"><a class="markdownIt-Anchor" href="#连接查询语法"></a> 连接查询语法</h4><p>以下介绍语法均为99版基本使用语法</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##99版，支持所有类型</span></span><br><span class="line"><span class="keyword">select</span> querylist</span><br><span class="line"><span class="keyword">from</span> Table1 ConnectType </span><br><span class="line"><span class="keyword">join</span> Table2  </span><br><span class="line"><span class="keyword">on</span> Connection_requirements</span><br><span class="line"><span class="keyword">where</span> conditions <span class="comment">#可无</span></span><br></pre></td></tr></table></figure><blockquote><p>通常为各表取别名，以壁面歧义，增加可读性。</p><p>ConnectType 可选 内连<code>inner</code> ，左外<code>left</code> ，右外<code>right</code>，全外<code>full</code> ，交叉连接<code>cross</code>，缺省时为inner</p></blockquote><h4 id="内连接"><a class="markdownIt-Anchor" href="#内连接"></a> 内连接</h4><ul><li><p><strong>等值连接</strong></p><p>连接条件为等值判断，从两个表中查询数据合并为一个表。</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询部门个数&gt;3的城市名和部门个数（分组、筛选）</span></span><br><span class="line"><span class="keyword">select</span>  city, <span class="keyword">count</span>(*) </span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> locations l</span><br><span class="line"><span class="keyword">on</span> l.location_id = d.location_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.location_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt;<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询员工名、部门名、工种名，并按部门名降序（多表连接）</span></span><br><span class="line"><span class="keyword">select</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> e.department_id = e.department_id</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> jobs j</span><br><span class="line"><span class="keyword">on</span> e.job_id = j.job_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> department_name <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>非等值连接</strong></p><p>除连接条件改变后，其余格式、用法与等值连接相同。</p></li><li><p><strong>自连接</strong></p><p>将一张表视为多张，在同一张表中查找信息进行匹配。</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查找上级</span></span><br><span class="line"><span class="keyword">select</span> e.last_name,m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">join</span> employees m</span><br><span class="line"><span class="keyword">on</span> e.manager_id = m.employee_id</span><br></pre></td></tr></table></figure></li></ul><h4 id="外部连接"><a class="markdownIt-Anchor" href="#外部连接"></a> 外部连接</h4><p>用于查询部分数据仅在一个表中存的情况</p><ol><li>区分主从表，若从表中存在匹配对象，显示匹配的值；若无，显示null</li><li>查询结果为主表中的所有记录：结果= 内连结果 + 【主表记录-null】</li></ol><ul><li><p><strong>左/右外连接</strong></p><p>左外连接<code>left</code>时，<code>join</code>左侧为主表；右外连接<code>right</code>时，<code>join</code>右侧为主表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line"><span class="keyword">select</span> b.name</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> boys bo</span><br><span class="line"><span class="keyword">on</span> bo.id = b.boyfriend_id</span><br><span class="line"><span class="keyword">where</span>  bo.id <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><blockquote><p>使用时先根据求取目标，确定主表</p></blockquote></li><li><p>全外连接</p><p>相当于将两个表分别进行左外、右外连接后将结果合并。<strong>（MYSQL不支持<code>full</code>）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line"><span class="keyword">select</span> b.* ,bo.*</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> boys bo</span><br><span class="line"><span class="keyword">on</span> bo.id = b.boyfriend_id ;</span><br></pre></td></tr></table></figure><h4 id="交叉连接"><a class="markdownIt-Anchor" href="#交叉连接"></a> 交叉连接</h4><p>相当于笛卡尔乘积</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#99交叉连接</span></span><br><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line"><span class="keyword">select</span> b.name ,bo.boyName</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> boys bo;</span><br><span class="line"></span><br><span class="line"><span class="comment">#等效笛卡尔</span></span><br><span class="line"><span class="keyword">select</span> b.name ,bo.boyName</span><br><span class="line"><span class="keyword">from</span> beauty b, boys bo;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;连接查询语法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#连接查询语法&quot;&gt;&lt;/a&gt; 连接查询语法&lt;/h4&gt;
&lt;p&gt;以下介绍语法均为99版基本使用语法&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-子查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_sub_query.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_sub_query.html</id>
    <published>2021-12-28T07:25:00.000Z</published>
    <updated>2022-03-17T13:52:54.339Z</updated>
    
    <content type="html"><![CDATA[<h4 id="子查询基本语法"><a class="markdownIt-Anchor" href="#子查询基本语法"></a> 子查询基本语法</h4><ul><li>子查询可放于<code>select</code>，<code>from</code>，<code>where</code>，<code>having</code>，<code>exists</code>（相关子查询）后</li></ul><ol><li>子查询放于小括号内</li></ol><ul><li>子查询又可分为<strong>相关子查询</strong>与<strong>非相关子查询</strong><ul><li><p>相关子查询一般放置于where、having之后，需要从外部查询获取结果，其一般执行多次。</p></li><li><p>非相关子查询与外部查询相互独立，一般仅执行一次。</p></li></ul></li></ul><h4 id="放置于where-having后"><a class="markdownIt-Anchor" href="#放置于where-having后"></a> <strong>放置于<code>where</code>、<code>having</code>后</strong></h4><p>支持：标量子查询（单行子查询）、列子查询（多行子查询）、行子查询</p><blockquote><ol><li>此时子查询一般放在条件的右侧。</li><li>标量子查询使用单行操作符如<code>&gt;</code>,<code>=</code>；列子查询使用多行操作符<code>in/not in</code> <code>any/some/all</code></li></ol></blockquote><ul><li><p>标量子查询</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询最低工资大于50号部门最低工资的部门id及其最低工资</span></span><br><span class="line"><span class="keyword">select</span>  department_id, <span class="keyword">min</span>(salary) </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">min</span>(salary)&gt; (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees </span><br><span class="line"><span class="keyword">where</span> department_id =<span class="number">50</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>注意：对分组后的数据进行筛选使用 having</p></blockquote></li><li><p>列子查询</p><ul><li>使用 <code>in</code> 修饰列子查询结果，返回符合列子查询结果的元素。</li><li>使用 <code>any/some</code> 修饰列子查询结果，将查询列表与列子查询结果依次对比，返回存在一次比较满足要求的结果。</li><li>使用 <code>all</code> 修饰列子查询结果，将查询列表与列子查询结果依次对比，返回所有比较均满足要求的结果。</li></ul><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">#返回其他工种中比job_id为'IT_PROG'部门任一工资低的员工的工号、姓名、jobid及工资</span></span><br><span class="line">  <span class="keyword">select</span> employee_id,last_name,job_id,salary</span><br><span class="line">  <span class="keyword">from</span> employees</span><br><span class="line">  <span class="keyword">where</span> salary&lt; <span class="keyword">any</span>(</span><br><span class="line">  <span class="keyword">select</span> salary</span><br><span class="line">  <span class="keyword">from</span> employees</span><br><span class="line">  <span class="keyword">where</span> job_id = <span class="string">'IT_PROG'</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">and</span> job_id&lt;&gt; <span class="string">'IT_PROG'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#### **放置于`select`后**</span></span><br><span class="line"></span><br><span class="line">仅支持：标量子查询，一般为非相关子查询</span><br><span class="line"></span><br><span class="line">- 示例：</span><br><span class="line">  </span><br><span class="line">  ```sql</span><br><span class="line">  <span class="comment">#查询各部门信息及员工人数</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">#方式一 相关子查询</span></span><br><span class="line">  <span class="keyword">select</span> d.*,( </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line">  <span class="keyword">from</span> employees e</span><br><span class="line">      <span class="keyword">where</span> e.department_id =d.department_id) <span class="keyword">num</span></span><br><span class="line">  <span class="keyword">from</span> departments d;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">#方式二 连接+gorup by</span></span><br><span class="line">  <span class="keyword">select</span> d.*,<span class="keyword">count</span>(e.department_id) <span class="keyword">num</span></span><br><span class="line">  <span class="keyword">from</span> departments d</span><br><span class="line">  <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> employees e</span><br><span class="line">  <span class="keyword">on</span> d.department_id = e.department_id</span><br><span class="line">  <span class="keyword">group</span> <span class="keyword">by</span> d.department_id;</span><br></pre></td></tr></table></figure><blockquote><p>方式一中，子查询被执行多次，针对外部查询的每一个组元，都进行了一次子查询。</p></blockquote></li></ul><h4 id="放置于from后"><a class="markdownIt-Anchor" href="#放置于from后"></a> <strong>放置于<code>from</code>后</strong></h4><p>支持：表子查询</p><blockquote><p>子查询一般为非相关子查询，结果作为一个虚拟表返回给外部查询。</p></blockquote><ul><li><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询各部门信息及员工人数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方式一,非相关子查询</span></span><br><span class="line"><span class="keyword">select</span> d.* ,<span class="keyword">ifnull</span>(c,<span class="number">0</span>) <span class="keyword">num</span></span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> (</span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">count</span>(*) c</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id) n</span><br><span class="line"><span class="keyword">on</span> n.department_id = d.department_id;</span><br></pre></td></tr></table></figure><blockquote><p>此时子查询必须要添加别名（虚拟表的表名）</p></blockquote></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;子查询基本语法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#子查询基本语法&quot;&gt;&lt;/a&gt; 子查询基本语法&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;子查询可放于&lt;code&gt;select&lt;/code&gt;，&lt;code&gt;from&lt;/code&gt;，&lt;code&gt;w</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-分组函数及分组查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_groupfunction.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_groupfunction.html</id>
    <published>2021-12-21T09:25:00.000Z</published>
    <updated>2022-03-17T13:22:48.715Z</updated>
    
    <content type="html"><![CDATA[<h4 id="常见分组函数"><a class="markdownIt-Anchor" href="#常见分组函数"></a> 常见分组函数</h4><ol><li>可以与<code>distinct</code>配合使用</li><li>以下函数运算时均忽略<code>null</code></li></ol><table>    <tr>        <td>sum( column )</td>        <td>求和，仅支持数值类型</td>    </tr>    <tr>        <td>avg( column )</td>        <td>平均，仅支持数值类型</td>    </tr>        <tr>        <td>max( column )</td>        <td>最大，支持数值、字符等可比较类型</td>    </tr>    <tr>        <td>min( column )</td>        <td>最小，支持数值、字符等可比较类型</td>    </tr>    <tr>        <td>count( column )</td>        <td>计数，仅计算非null单元，支持所有类型</td>    </tr></table><blockquote><p>注意：与分组函数一同查询的字段要求为<code>group by</code> (见下文)操作后的字段（保持表格规整）</p></blockquote><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#利用 count、distinct 统计工种数目</span></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> job_id) kindnum <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure><ul><li><p><code>count()</code> <strong>函数</strong></p><p>使用<code>*</code>可统计表中所有行的数目，如</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#统计 Tablename 表中所有有效行（不全为null）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> Tablename;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(const) <span class="keyword">from</span> Tablename;<span class="comment">#相当于在非null行前添加'1'的元素，并计数</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：count(*)的效率在一些引擎下效率比count(1)高，一般使用前者</p></blockquote></li></ul><hr /><h4 id="分组查询"><a class="markdownIt-Anchor" href="#分组查询"></a> 分组查询</h4><p>利用相同元素对数据进行分组管理，使用<code>group by</code>关键字实现。</p><p><strong>基础语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column1,ground_func(column2)</span><br><span class="line"><span class="keyword">from</span> tablename</span><br><span class="line"><span class="keyword">where</span> conditional_statement <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> expression <span class="comment">#expression中理论包含column1</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">column</span>; <span class="comment">#可无</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：查询列表(<code>select</code>后的列)中的元素必须是分组函数或<code>group by</code> 后的字段</p></blockquote><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询各部门的，邮箱包含a字符的员工的平均工资</span></span><br><span class="line"><span class="keyword">select</span> department_id , <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> email <span class="keyword">like</span> <span class="string">'%a%'</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br></pre></td></tr></table></figure><p>分组查询后进行筛选，使用链接关键字<code>having</code> ：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询各人数大于2的部门人数</span></span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;=<span class="number">2</span> ;</span><br></pre></td></tr></table></figure><blockquote><ol><li><p><code>group by</code> 关键字后可以接用 函数、别名等。分组后支持排序。</p></li><li><p>多字段分组，只有多个字段同时相同，才会归并到同一个组。</p></li></ol></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;常见分组函数&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#常见分组函数&quot;&gt;&lt;/a&gt; 常见分组函数&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;可以与&lt;code&gt;distinct&lt;/code&gt;配合使用&lt;/li&gt;
&lt;li&gt;以下函数运算时均忽略&lt;code&gt;</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-单行函数</title>
    <link href="http://yoursite.com/posts/database/MYSQL_1Linefunction.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_1Linefunction.html</id>
    <published>2021-12-20T15:00:00.000Z</published>
    <updated>2022-03-17T14:30:45.098Z</updated>
    
    <content type="html"><![CDATA[<h4 id="字符函数"><a class="markdownIt-Anchor" href="#字符函数"></a> <strong>字符函数</strong></h4><table>    <tr>        <td>length(str)</td>        <td>获取 str 的字节个数</td>    </tr>    <tr>        <td>concat(str1,str2,strn)</td>        <td>拼接字符 str1,str2,strn</td>    </tr>        <tr>        <td>upper(str1)、lower(str1)</td>        <td>大小写转换</td>    </tr>    <tr>        <td>substr(str,num)</td>        <td>截取str字符长度从num开始的内容</td>    </tr>    <tr>        <td>instr(str,sub)</td>        <td>返回str中子串sub第一次出现的位置，若无该字串，返回0</td>    </tr>    <tr>        <td>trim( chars from str)</td>        <td>去掉str前后特定字符段chars，书写如 trim(str)时去掉空格</td>    </tr>    <tr>        <td>lpad(str,length,chars)【rpad】</td>        <td>使用char进行左【右】填充,使总长度为length。str超长时均从左侧开始截断</td>    </tr>    <tr>        <td>replace(str,sub,newsub)</td>        <td>使用 newsub 替换 str 中的 sub</td>    </tr></table><blockquote><ol><li>MYSQL 中，索引从 1 开始</li><li>substr()存在多个重载，如 substr(str,num,length)，截取Str从num开始length长度的字符</li></ol></blockquote><ul><li>简单函数使用示例<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> rpad(<span class="string">'Hellow_world'</span>,<span class="number">15</span>,<span class="string">'!'</span>) <span class="keyword">As</span> Game;</span><br><span class="line"><span class="comment">#结果为 'Hellow_world!!!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> rpad(<span class="string">'Hellow_world'</span>,<span class="number">6</span>,<span class="string">'!'</span>) <span class="keyword">As</span> Game;</span><br><span class="line"><span class="comment">#结果为 'Hellow'</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="常见数学函数"><a class="markdownIt-Anchor" href="#常见数学函数"></a> 常见数学函数</h4><table>    <tr>        <td>round(num,n)</td>        <td>四舍五入保留n位，n缺省时为整数</td>    </tr>    <tr>        <td>ceil(num)</td>        <td>向上取整（>=num 的最小整数）</td>    </tr>        <tr>        <td>floor(num)</td>        <td>向下取整</td>    </tr>    <tr>        <td>truncate(num,n)</td>        <td>截断num,保留n位小数</td>    </tr>    <tr>        <td>mode(num1,num2)</td>        <td>求余，与num1%num2相同</td>    </tr></table><blockquote><p>数学函数基本与其他语言类似，不再做介绍</p></blockquote><h4 id="日期函数"><a class="markdownIt-Anchor" href="#日期函数"></a> 日期函数</h4><table>    <tr>        <td>now()</td>        <td>返回当前时间</td>    </tr>    <tr>        <td>curdate()【curtime()】</td>        <td>获取当前日期【时间】</td>    </tr>        <tr>        <td>year(date)【month()】</td>        <td>获取数据date中的年份【月份】信息,同样有day,hour,minute等</td>    </tr>    <tr>        <td>str_to_date(str,format)</td>        <td>按照format中格式对str进行解析获取日期（默认格式）</td>    </tr>    <tr>        <td>date_format(date,format)</td>        <td>按照format中格式，将格式转换为字符串</td>    </tr></table><blockquote><ol><li>获取时间及日期基于当前系统时间</li><li>format格式除关键字符外部分可自行定义</li></ol></blockquote><ul><li><p>简单示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用 str_to_date(str,format)</span></span><br><span class="line"><span class="comment">#字符格式 年-日-月</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>( <span class="string">'1998-25-2'</span>,<span class="string">'%Y-%d-%c'</span>);</span><br><span class="line"><span class="comment">#结果为 '1998-02-25'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用 str_to_date(str,format)</span></span><br><span class="line"><span class="keyword">Use</span> myemployees;</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">first_name,<span class="keyword">date_format</span>(hiredate,<span class="string">'%m月/%d日 %Y年'</span>) <span class="keyword">As</span> 入职日期</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">hiredate <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">#结果之一'Alberto', '12月/23日 2002年'</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="流程控制函数span-idjump-span"><a class="markdownIt-Anchor" href="#流程控制函数span-idjump-span"></a> 流程控制函数<span id="jump"> </span></h4><table>    <tr>        <td>if(a,b,c)</td>        <td>类似三元运算符 a?b:c;</td>    </tr>    <tr>        <td>case</td>        <td>switch语句用法</td>    </tr>    <tr>        <td>case</td>        <td>多重if 语句用法</td>    </tr>    </table>- `case`使用语法：  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># switch用法</span></span><br><span class="line">case expression</span><br><span class="line">when const_value1 then value1/statement1 [;]</span><br><span class="line">when const_value2 then value2/statement2 [;]</span><br><span class="line">...</span><br><span class="line">else value/statement [;]</span><br><span class="line"><span class="keyword">end</span> [<span class="keyword">case</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多重if用法</span></span><br><span class="line"><span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> condition1 <span class="keyword">then</span> value1/statement1 [;]</span><br><span class="line">when condition2 then value2/statement2 [;]</span><br><span class="line">...</span><br><span class="line">else value/statement [;]</span><br><span class="line"><span class="keyword">end</span> [<span class="keyword">case</span>]</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><ol><li>可搭配 select 作为查询表达式，此时when 后只能使用 值或表达式，不能使用语句。</li><li>case 可单独使用，进行流程控制（仅限在<code>begin</code>-<code>end</code>中）,此时语法需加上<code>[]</code>中内容，即 <code>;</code>与<code>end case</code></li><li>switch相当于等值判断，if相当于区间判断在mySQL语法上区别在于cass后是否有表达，when后的判断为值还是条件判断</li></ol></blockquote><ul><li><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据部门号，显示不同倍率的工资（switch用法）</span></span><br><span class="line"><span class="keyword">select</span> salary,department_id,</span><br><span class="line"><span class="keyword">case</span> department_id</span><br><span class="line"><span class="keyword">when</span> <span class="number">30</span> <span class="keyword">then</span> salary*<span class="number">1.1</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">40</span> <span class="keyword">then</span> salary*<span class="number">1.2</span></span><br><span class="line"><span class="keyword">else</span> salary</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">As</span> <span class="string">`new salary`</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">#工资范围，区分等级（if 用法）</span></span><br><span class="line"><span class="keyword">select</span> last_name,salary,</span><br><span class="line"><span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> salary&gt;=<span class="number">15000</span> <span class="keyword">then</span><span class="string">'A'</span></span><br><span class="line"><span class="keyword">when</span> salary&gt;=<span class="number">10000</span> <span class="keyword">then</span> <span class="string">'B'</span></span><br><span class="line"><span class="keyword">else</span> <span class="string">'C'</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">As</span> <span class="string">`Grade`</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;字符函数&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#字符函数&quot;&gt;&lt;/a&gt; &lt;strong&gt;字符函数&lt;/strong&gt;&lt;/h4&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;length(str)&lt;/td&gt;
      </summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-排序查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_sorting_query.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_sorting_query.html</id>
    <published>2021-12-20T14:29:17.000Z</published>
    <updated>2022-03-17T13:18:02.968Z</updated>
    
    <content type="html"><![CDATA[<h4 id="排序查询语法"><a class="markdownIt-Anchor" href="#排序查询语法"></a> 排序查询语法</h4><p>基本语法格式如下，<code>order by</code> 一般放在查询的最后（除 <code>limit</code>）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">querylist</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">tablename</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">conditional <span class="keyword">statement</span> <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">sortlist <span class="keyword">asc</span> <span class="comment">#降序为 desc；默认（省略时）asc</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>按表达式排序</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据年薪排序</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary*<span class="number">12</span>*(<span class="number">1</span>+<span class="keyword">IFNULL</span>(commission_pct,<span class="number">0</span>));</span><br></pre></td></tr></table></figure><blockquote><p><code>order by</code>命令 <strong>初表达式</strong>外，同样支持使用<strong>别名</strong>、<strong>函数</strong>进行排序</p></blockquote></li><li><p><strong>多字段排序</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>, employee_id <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><blockquote></blockquote></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;排序查询语法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#排序查询语法&quot;&gt;&lt;/a&gt; 排序查询语法&lt;/h4&gt;
&lt;p&gt;基本语法格式如下，&lt;code&gt;order by&lt;/code&gt; 一般放在查询的最后（除 &lt;code&gt;limit&lt;/code</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-条件查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_condition_query.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_condition_query.html</id>
    <published>2021-12-20T07:25:17.000Z</published>
    <updated>2022-03-17T13:16:12.862Z</updated>
    
    <content type="html"><![CDATA[<h4 id="条件查询语法"><a class="markdownIt-Anchor" href="#条件查询语法"></a> 条件查询语法</h4><ol><li>执行顺序: Tablename &gt;&gt; condition &gt;&gt;Querylist</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> </span><br><span class="line">Querylist</span><br><span class="line"><span class="keyword">From</span> </span><br><span class="line">Tablename</span><br><span class="line"><span class="keyword">Where</span></span><br><span class="line">conditional <span class="keyword">statement</span>;</span><br></pre></td></tr></table></figure><ul><li><p><strong>按条件表达式筛选</strong></p><p>条件运算符：<code>&gt;</code> <code>&lt;</code> <code>=</code> <code>!=</code> <code>&lt;&gt;</code> <code>&gt;=</code> <code>&lt;=</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#工资大于12000的员工姓，工号，工资</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">last_name,job_id,salary</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">employees</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">salary &gt; <span class="number">12000</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>按照模糊查询（复杂条件）</strong></p><p>模糊查询关键字：<code>like</code> <code>between and</code> <code>in</code> <code>is null</code> <code>is not null</code></p><ul><li><p><strong>like关键字：</strong></p><p>与SQL通配符一同使用，如 <code>%</code>(任意多个)  <code>_</code>(任意单个)，<code>_</code>与<code>%</code> 的转义符为<code>\</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#寻找含有a的姓名</span></span><br><span class="line"><span class="keyword">select</span>*</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span>last_name <span class="keyword">like</span> <span class="string">'%a%'</span>;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>可通过 <code>escape</code>指定转义符如： <code>last_name LIKE '_$_%' escape '$';</code></p></blockquote><ul><li><p><strong>between value1 and  value2 关键字：</strong></p><p>等价于<code>department_id&gt;=value1 OR department_id&lt;=value2</code></p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#部门编号在90-110，</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">*</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">department_id <span class="keyword">between</span> <span class="number">90</span> <span class="keyword">and</span> <span class="number">110</span> ;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：其中value2&gt;value1，包含边界值。</p></blockquote><ul><li><p><strong>in 关键字</strong></p><p>用于判断 列表中是否存在符合 <code>in</code> 后关键字列表的元素。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#读取对应工种名单</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">*</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line"> job_id <span class="keyword">IN</span> (<span class="string">'IT_PROG'</span>,<span class="string">'AD_VP'</span>);</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：不能使用通配符，IN列表类型相同/兼容。</p></blockquote><ul><li><p><strong>Is null 与Is not null</strong></p><p>由于 <code>=</code>不能用于 <code>null</code>的比较，故使用此关键字。</p><p>安全等于：<code>&lt;=&gt;</code>可以用于<code>null</code>的比较，通常不使用。</p></li></ul></li><li><p><strong>按逻辑表达式筛选</strong></p><p>推荐逻辑关键字：<code>and</code> <code>or</code>  <code>not</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#部门编号不在90-110，或工资高于15000</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">*</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">department_id&gt;<span class="number">110</span> <span class="keyword">OR</span> department_id&lt;<span class="number">90</span> <span class="keyword">OR</span> salary&gt;<span class="number">15000</span>;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;条件查询语法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#条件查询语法&quot;&gt;&lt;/a&gt; 条件查询语法&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;执行顺序: Tablename &amp;gt;&amp;gt; condition &amp;gt;&amp;gt;Querylist&lt;/</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-基础查询</title>
    <link href="http://yoursite.com/posts/database/MYSQL_basic_query.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_basic_query.html</id>
    <published>2021-12-20T03:49:17.000Z</published>
    <updated>2022-03-17T13:16:21.800Z</updated>
    
    <content type="html"><![CDATA[<h4 id="基础查询语法"><a class="markdownIt-Anchor" href="#基础查询语法"></a> 基础查询语法</h4><ol><li><code>Querylist</code>可以是表中的字段、常量值、表达式、函数。可以是多个字段，以逗号相隔。</li><li>查询的结果为虚拟表格（不影响表格内容）</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Querylist</span><br><span class="line"><span class="keyword">From</span> Tablename; <span class="comment">#非必要行，指定查询位置</span></span><br></pre></td></tr></table></figure><ul><li><strong>查询字段</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#单个字段</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">#多个字段</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,email <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">#所有字段</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><blockquote><p>注意：1. 查询多个查询表时，按照查询序输出。使用*时默认按表格顺序；</p><ol start="2"><li>必要时通过添加着重符号 ` 区分关键字与字段名，增加可读性</li></ol></blockquote><ul><li><strong>查询常量/表达式/函数</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'john'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询表达式</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>%<span class="number">98</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">version</span>();</span><br></pre></td></tr></table></figure><blockquote><p>注意：1. 字符都默认为字符串，使用单引号</p><ol start="2"><li>计算表达式后查询</li><li>查询函数相当于获取函数返回值</li></ol></blockquote><ul><li><p><strong>去除重复项目</strong></p><p>利用 <code>distinct</code>关键字去除重复项</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department_id <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure><ul><li><p><strong>字符拼接</strong></p><p>SQL中，<code>+</code>号只作算数运算符，其规则如下</p><ol><li>运算对象存在字符类型，将其转化为数字：若成功，算数加法；若失败，字符转化为0。</li><li>运算对象存在<code>null</code>，运算结果为<code>null</code></li></ol><p>采用<code>concat</code>函数链接，详见<a href=".%5CMYSQL_function">单行函数</a></p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#合并</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(last_name,first_name) <span class="keyword">AS</span> <span class="string">`name`</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure><h4 id="查询列表别名"><a class="markdownIt-Anchor" href="#查询列表别名"></a> <strong>查询列表别名</strong></h4><ol><li>便于理解（给表达式查询命名）</li><li>重名字段区分。</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#单个字段</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>%<span class="number">98</span> <span class="keyword">As</span> <span class="keyword">result</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#多个字段</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">AS</span> 姓,first_name <span class="keyword">AS</span> 名</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><blockquote><p>AS 可省略，用空格代替；别名存在分隔(如空格)时，采用“ ”包括壁面歧义</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;基础查询语法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#基础查询语法&quot;&gt;&lt;/a&gt; 基础查询语法&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Querylist&lt;/code&gt;可以是表中的字段、常量值、表达式、函数。可以是多个字段，以逗号相</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>SQL-常用命令</title>
    <link href="http://yoursite.com/posts/database/MYSQL_command.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_command.html</id>
    <published>2021-12-20T01:20:17.000Z</published>
    <updated>2022-03-17T13:16:43.076Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常用命令"><a class="markdownIt-Anchor" href="#常用命令"></a> 常用命令</h3><h4 id="1-查看-打开"><a class="markdownIt-Anchor" href="#1-查看-打开"></a> 1、查看 &amp; 打开</h4><blockquote><p>mysql<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>库<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>表<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>数据，使用<code>desc</code>、<code>show</code>  &amp; <code>use</code> 进行查看与访问.</p><p>初始默认4个数据库<code>information_schema</code>、<code>mysql</code>、<code>performance_schema</code>、<code>test</code>。前三个不可修改</p></blockquote><p><strong>语法</strong></p><ul><li><p>查看所有数据库 <code>show databases；</code></p></li><li><p>查看当前数据库 <code>select datbase();</code></p></li><li><p>查看<strong>当前库</strong>所有表 <code>show tables;</code></p></li><li><p>查看<strong>指定库</strong>所有表 <code>show tables from DatabaseName;</code></p></li><li><p>查看<strong>表结构</strong> <code>desc TableName;</code></p></li><li><p>打开指定数据库 <code>use DatabaseName</code></p><blockquote><p>语句末尾需要加分号 <code>;</code></p><p>命令语句不区分大小写</p><p>注释：单行注释 <code>#注释</code>，<code>-- 注释（空格不可去）</code>，多行注释<code>\*注释*\</code></p></blockquote></li></ul><h4 id="2-创建删除"><a class="markdownIt-Anchor" href="#2-创建删除"></a> 2、创建&amp;删除</h4><p><strong>语法</strong></p><ul><li><p>创建表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">creat table TableNanme(</span><br><span class="line">RowName1 type，</span><br><span class="line">    RowName2 type,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>删除表</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;常用命令&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#常用命令&quot;&gt;&lt;/a&gt; 常用命令&lt;/h3&gt;
&lt;h4 id=&quot;1-查看-打开&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-查看-打开&quot;&gt;&lt;/a&gt; 1、</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>MYSQL安装</title>
    <link href="http://yoursite.com/posts/database/MYSQL_start.html"/>
    <id>http://yoursite.com/posts/database/MYSQL_start.html</id>
    <published>2021-12-19T01:09:17.000Z</published>
    <updated>2022-03-17T09:55:11.254Z</updated>
    
    <content type="html"><![CDATA[<h4 id="软件安装"><a class="markdownIt-Anchor" href="#软件安装"></a> 软件安装</h4><ul><li><p>官网：<a href="https://www.mysql.com/" target="_blank" rel="noopener">https://www.mysql.com/</a> ，选择DownLoads &gt;&gt; Community社区版 &gt;&gt; Installer</p></li><li><p>打开安装包，选择自定义安装(Custom)，添加server，点击Options可更改安装路径</p></li><li><p>配置：选用开发机，默认端口（3306），next。输入root用户密码，设置服务名。</p><center> <figure>   <img src="https://gitee.com/Liu-Yushen/blog_image/raw/master/img\mysql_download_1.png" style="zoom:30%"/>     <img src="https://gitee.com/Liu-Yushen/blog_image/raw/master/img\mysql_download_2.png" style="zoom:30%" />     <img src="https://gitee.com/Liu-Yushen/blog_image/raw/master/img\mysql_download_3.png" style="zoom:30%" /> </figure> </center></li><li><p>环境变量：复制bin路径，如<code>C:\Program Files\MySQL\MySQL Server 8.0\bin</code></p><p>右击计算机 &gt;&gt; 属性 &gt;&gt;高级系统设置 &gt;&gt;高级&gt;&gt;环境变量&gt;&gt;新建，粘贴</p><img src="https://gitee.com/Liu-Yushen/blog_image/raw/master/img/mysql_download_4.png" width="400"></li><li><p>安装图形化界面</p><ul><li>通过官网安装 / 通过Installer&gt;&gt;add&gt;&gt;workbench 安装</li><li>一般会自动识别账户，若没有点击+号自行设置</li></ul><img src="https://gitee.com/Liu-Yushen/blog_image/raw/master/img\mysql_download_5.png" width="500"></li></ul><hr /><h4 id="启动停止服务"><a class="markdownIt-Anchor" href="#启动停止服务"></a> 启动/停止服务</h4><p>通过电脑-&gt;管理-&gt;服务和管理-&gt;服务-&gt;启动MySQL服务</p><p>通过命令行启动服务</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; net start mysqlname</span><br><span class="line">&gt; net <span class="built_in">stop</span> mysqlname</span><br></pre></td></tr></table></figure><h4 id="登录退出服务端"><a class="markdownIt-Anchor" href="#登录退出服务端"></a> 登录/退出服务端</h4><p>通过客户端-&gt;输入密码</p><p>通过命令行：<code>mysql</code> -h 主机名 -P 端口号 -u 用户 -p 密码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql -h localhost -P <span class="number">3306</span> -u root - p</span><br><span class="line">&gt; passwords</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;软件安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#软件安装&quot;&gt;&lt;/a&gt; 软件安装&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;官网：&lt;a href=&quot;https://www.mysql.com/&quot; target=&quot;_blank&quot; rel=</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>Start-数据库系统（目录）</title>
    <link href="http://yoursite.com/posts/database/database_index.html"/>
    <id>http://yoursite.com/posts/database/database_index.html</id>
    <published>2021-12-18T01:09:17.000Z</published>
    <updated>2022-03-17T14:27:24.359Z</updated>
    
    <content type="html"><![CDATA[<h3 id="软件mysql"><a class="markdownIt-Anchor" href="#软件mysql"></a> 软件（MYSQL）</h3><ul><li>安装、启动及登录 —— <a href="./MYSQL_start.html" target="_blank">MySQL安装</a></li><li>图形化界面使用</li><li><a href="./MYSQL_command.html" target="_blank">常见指令</a></li></ul><hr /><h3 id="sql语言"><a class="markdownIt-Anchor" href="#sql语言"></a> SQL语言</h3><h4 id="dql查询语法-data-query-language"><a class="markdownIt-Anchor" href="#dql查询语法-data-query-language"></a> —DQL查询语法 (Data Query Language)</h4><ul><li><p><strong>基础查询</strong>——&gt;<a href=".\MYSQL_basic_query.html" target="_blank">详情</a></p><ul><li>列表查询</li><li>列表别名</li></ul><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Querylist</span><br><span class="line"><span class="keyword">From</span> Tablename; <span class="comment">#非必要行，指定查询位置</span></span><br></pre></td></tr></table></figure></li><li><p><strong>条件查询</strong>——&gt;<a href=".\MYSQL_condition_query.html" target="_blank">详情</a></p><ul><li>条件表达式</li><li>逻辑表达式</li></ul><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> </span><br><span class="line">Querylist</span><br><span class="line"><span class="keyword">From</span> </span><br><span class="line">Tablename</span><br><span class="line"><span class="keyword">Where</span></span><br><span class="line">conditional <span class="keyword">statement</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>排序查询</strong>——&gt;<a href=".\MYSQL_sorting_query.html" target="_blank">详情</a></p><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">querylist</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">tablename</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">conditional <span class="keyword">statement</span> <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">sortlist <span class="keyword">asc</span>; <span class="comment">#降序为 desc；默认（省略时）asc</span></span><br></pre></td></tr></table></figure></li><li><p><strong>常见函数</strong></p><ul><li><p><strong>单行函数</strong>——&gt;<a href=".\MYSQL_1Linefunction.html" target="_blank">函数介绍</a></p><p>用作数据处理，如 <code>concat()</code>、<code>length()</code>、<code>ifnull()</code>，输入单值，输出单值。</p><ul><li>字符函数</li><li>数学函数</li><li>日期函数</li><li>流程控制函数</li></ul></li><li><p><strong>分组函数及查询</strong>——&gt;<a href=".\MYSQL_groupfunction.html" target="_blank">函数介绍</a></p><p>又称为统计函数，用于数据统计，输入一组函数。</p><ul><li>分组函数</li><li>分组查询</li></ul></li></ul><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">function</span>(<span class="keyword">value</span>) </span><br><span class="line"><span class="keyword">from</span> Tablename <span class="comment">#此命令可无</span></span><br></pre></td></tr></table></figure></li><li><p><strong>链接查询</strong>——&gt;<a href=".\MYSQL_link_query.html" target="_blank">具体说明（99版）</a></p><ul><li><p><strong>内连接</strong>（inner）</p><ul><li>等值连接</li><li>非等值连接</li><li>自连接</li></ul></li><li><p><strong>外连接</strong></p><ul><li>左外连接（left）</li><li>右外连接（right）</li><li>全外连接（full）</li></ul></li><li><p><strong>交叉连接</strong>（cross）</p></li></ul><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##92版，仅支持内连接</span></span><br><span class="line"><span class="keyword">select</span> Table1.column1 ,Table2.column2</span><br><span class="line"><span class="keyword">from</span> Table1, Table2</span><br><span class="line"><span class="keyword">where</span> Connection_requirements <span class="comment">#标明连接条件，否则出现笛卡尔连接（mXn行）</span></span><br><span class="line"><span class="keyword">And</span> conditions <span class="comment">#使用AND追加筛选条件，多表连接条件，可无</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cloumn3 <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> column4 <span class="keyword">desc</span><span class="comment">#可无</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##99版，支持所有类型</span></span><br><span class="line"><span class="keyword">select</span> querylist</span><br><span class="line"><span class="keyword">from</span> Table1 ConnectType<span class="comment">#ConnectType 为连接类型默认inner，见上文括号内容</span></span><br><span class="line"><span class="keyword">join</span> Table2</span><br><span class="line"><span class="keyword">on</span> Connection_requirements</span><br><span class="line"><span class="keyword">where</span> conditions <span class="comment">#可无</span></span><br></pre></td></tr></table></figure><blockquote><p>有92及99两个版本的连接版本语法，推荐使用99版本</p><p>Connection_requirements 可为等值、非等值判断，对应不同类型连接</p></blockquote></li><li><p><strong>子查询</strong>——&gt;<a href=".\MYSQL_sub_query.html" target="_blank">具体说明（99版）</a></p><ul><li>标量子查询（1X1）</li><li>列子查询（nX1）</li><li>行子查询（1Xn）</li><li>表子查询（nXm）</li></ul><blockquote><p>使用<code>()</code>将查询放于<code>select</code>，<code>from</code>，<code>where</code>，<code>having</code>，<code>exists</code>之后，作为子查询</p></blockquote></li><li><p><strong>分页查询</strong></p><p>可用作分段提交sql查询请求</p><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">querylist</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">tablename</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">conditional <span class="keyword">statement</span> <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">sortlist <span class="keyword">asc</span> <span class="comment">#可无</span></span><br><span class="line"><span class="keyword">limit</span> </span><br><span class="line"><span class="keyword">offset</span>,<span class="keyword">size</span>; <span class="comment">#offset为开始条目（初始条目为0），size为条目数</span></span><br></pre></td></tr></table></figure></li><li><p><strong>联合查询</strong></p><p>用于合并多条查询语句的查询结果（可用作合并来自不同表的查询结果，但理论上要求有一定联系）</p><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> talbe1 <span class="keyword">where</span> conditiona statement1</span><br><span class="line"><span class="keyword">union</span> <span class="comment">#使用 union all时可包含重复项</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> talbe2 <span class="keyword">where</span> conditiona statement2;</span><br></pre></td></tr></table></figure><blockquote><ul><li>联合查询要求多个查询语句的查询列数相同。</li><li>union 默认去重，union all时可包含重复项</li></ul></blockquote></li></ul><blockquote><p>以上所提到的关键字执行顺序如下：</p><p><code>from</code>→ <code>join</code>→<code>on</code>→<code>where</code>→<code>group by</code>→<code>分组函数</code>→</p><p><code>having</code>→<code>select</code>→<code>distinct</code>→<code>order by</code>→<code>limit</code></p><ul><li>执行过程中生成虚拟表，并对虚拟表进行操作更新虚拟表（连接、分组等），直到<code>select</code>才从虚拟表中提取<strong>查询列</strong></li></ul></blockquote><hr /><h4 id="dml-数据管理"><a class="markdownIt-Anchor" href="#dml-数据管理"></a> DML 数据管理</h4><ul><li><p>插入 <code>insert into</code></p></li><li><p>修改 <code>update</code></p></li><li><p>删除 <code>delete</code></p><p>使用语法：<a href=".\DML_add.html" target="_blank">详情</a></p></li></ul><hr /><h4 id="ddl-数据定义"><a class="markdownIt-Anchor" href="#ddl-数据定义"></a> DDL 数据定义</h4><p>通常在创建数据库、表格时，一般情况下会先对现有表进行删除（除非需要其中数据），再创建表</p><p>通常语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">exists</span> Database_Name ;<span class="comment">#或者TableName</span></span><br><span class="line">creat database Database_Name;<span class="comment">#或Table创建语句</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>库管理语言</strong></p><ul><li><p>创建库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>] DataBase_Name;</span><br></pre></td></tr></table></figure><blockquote><p><code>[]</code>内语句为可选语句，通过 <code>if not exists</code> 判断可增加容错性</p></blockquote></li><li><p>修改库</p><p>修改字符集语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> books <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br></pre></td></tr></table></figure><blockquote><p>注意：通常情况下不修改库的信息。</p></blockquote></li><li><p>删除库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] DataBase_Name;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>表管理语言</strong>——&gt;<a href=".\DDL_database.html" target="_blank">详情</a></p><ul><li><p>创建表</p></li><li><p>修改表</p><ul><li><p>修改列名（<code>change</code>）</p></li><li><p>修改列类型、约束（<code>modify</code>）</p><p>——&gt; <a href=".\DDL_type.html" target="_blank">类型说明</a></p><p>——&gt;<a href=".\DDL_constraint.html" target="_blank">约束说明(含标识列)</a></p></li><li><p>添加、删除列（<code>add</code>，<code>drop</code>）</p></li><li><p>修改表名（<code>rename to</code>）</p></li></ul></li><li><p>复制表</p></li><li><p>删除表</p></li></ul></li></ul><hr /><h4 id="tcl-事务管理"><a class="markdownIt-Anchor" href="#tcl-事务管理"></a> TCL 事务管理</h4><p><strong>事务</strong>：一个或一组sql语句组成的一个执行单元。</p><p><strong>存储引擎</strong>：用不同的技术存储数据库中的数据与文件（或内存）。</p><blockquote><p>myisam，memory等引擎不支持事务</p></blockquote><p><strong>事务相关操作</strong>——&gt;<a href=".\TCL_.html" target="_blank">详情</a></p><ul><li>事务创建</li><li>保存点 <code>save point</code></li><li>事务并发<ul><li>引发问题：脏读、不可重复读、幻读</li><li>隔离级别：<code>read uncommitted</code> <code>read committed</code> <code>repeatable read</code> <code>serializable</code></li></ul></li></ul><p>基本语法：</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit = <span class="number">0</span>; <span class="comment">#开始 事务</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>; <span class="comment">#可省略</span></span><br><span class="line">SQL_Statements1;</span><br><span class="line">SQL_Statements2;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">commit</span>; <span class="comment">#结束 可使用回滚语句：rollback;</span></span><br></pre></td></tr></table></figure><p><strong>事务的基本属性</strong>（ACDI）</p><ul><li>原子性 Atomicity：事务内容不可分割</li><li>一致性 Consistency：事务执行前后数据状态一致</li><li>隔离性 Isolation：事务的执行不被其他事务干扰（根据隔离级别）</li><li>持久性 Durability：事务一旦提交，永久改变库中数据</li></ul><hr /><h4 id="视图"><a class="markdownIt-Anchor" href="#视图"></a> 视图</h4><blockquote><p>可看作虚拟表，与普通表用法相同，具有临时性。仅保存sql逻辑，不保存查询结果。</p></blockquote><p>视图操作——&gt; <a href=".\view.html" target="_blank">详情</a></p><ul><li>创建</li><li>修改</li><li>删除</li><li>更新（视图数据）</li></ul><hr /><h4 id="变量"><a class="markdownIt-Anchor" href="#变量"></a> 变量</h4><p><strong>系统变量</strong>：由系统提供，属于服务器层面</p><blockquote><p>使用<code>@@</code> 标识系统变量</p></blockquote><ul><li><p>全局变量 <code>global</code></p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看系统变量</span></span><br><span class="line"><span class="keyword">Show</span> <span class="keyword">global</span> <span class="keyword">variables</span>; <span class="comment">#global为全局</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%char%'</span>; <span class="comment">#查找一定变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @@global.VariableName; <span class="comment">#查看特定全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#给变量赋值</span></span><br><span class="line"><span class="keyword">set</span> @@global.VariableName= value1;</span><br></pre></td></tr></table></figure><blockquote><p>给全局变量赋值对所有会话（连接）有效，但不跨重启</p></blockquote></li><li><p>会话变量 <code>session</code></p><p>基本语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看系统变量</span></span><br><span class="line"><span class="keyword">Show</span> [<span class="keyword">session</span>] <span class="keyword">variables</span>; <span class="comment">#[session]为会话，可省略</span></span><br><span class="line"><span class="keyword">show</span> [<span class="keyword">session</span>] <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%char%'</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @@[session.]VariableName; <span class="comment">#查看特定变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#给变量赋值</span></span><br><span class="line"><span class="keyword">set</span>  @@VariableName= value1;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> VariableName= value1;</span><br></pre></td></tr></table></figure></li></ul><p><strong>自定义变量</strong></p><ul><li><p>用户变量：作用于当前会话</p><p>使用语法</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#声明(也可用作赋值)</span></span><br><span class="line"><span class="keyword">set</span> @VariableName := value1;</span><br><span class="line"><span class="keyword">select</span> @VariableName := value1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#赋值</span></span><br><span class="line"><span class="keyword">select</span> column1 <span class="keyword">into</span> @VariableName</span><br><span class="line"><span class="keyword">from</span> TableName;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看、使用</span></span><br><span class="line"><span class="keyword">select</span> @VariableName;</span><br></pre></td></tr></table></figure><blockquote><p>使用 <code>@</code> 符号区分用户变量和列名，使用<code>:=</code> 对变量赋值</p><p><code>select</code> 为查询部分，在后续使用查询语法。</p></blockquote><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用户变量</span></span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">count</span> := <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> @<span class="keyword">count</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @<span class="keyword">count</span>;</span><br></pre></td></tr></table></figure></li><li><p>局部变量：仅作用于其定义的<code>begin</code> <code>end</code>中</p><p>使用语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#声明</span></span><br><span class="line"><span class="keyword">declare</span> VariableName <span class="keyword">type</span> [<span class="keyword">default</span> value1];</span><br><span class="line"></span><br><span class="line"><span class="comment">#赋值</span></span><br><span class="line"><span class="keyword">set</span> VariableName := value1;</span><br><span class="line"><span class="keyword">select</span> @VariableName := value1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> column1 <span class="keyword">into</span> VariableName</span><br><span class="line"><span class="keyword">from</span> TableName;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看、使用</span></span><br><span class="line"><span class="keyword">select</span> VariableName;</span><br></pre></td></tr></table></figure><blockquote><p>通常不需要使用<code>@</code></p><p><code>[]</code>中为非必要语句。局部变量必须声明类型，且需在<code>begin</code> <code>end</code> 域内第一句。</p></blockquote></li></ul><hr /><h4 id="存储过程与函数"><a class="markdownIt-Anchor" href="#存储过程与函数"></a> 存储过程与函数</h4><p>存储过程：一组预先编译好的sql语句集合（批量处理语句）</p><blockquote><p>与函数/方法类似，可简化操作、提高效率（较少编译次数及连接次数）</p></blockquote><p><strong>创建过程</strong></p><ul><li><p>参数列表</p><ul><li><p>参数模式 [mode]</p><p><code>in</code>：该参数可作为输入</p><p><code>out</code>：该参数可作为输出</p><p><code>inout</code>：支持输入和返回</p></li><li><p>参数名 [paramenter]</p></li><li><p>参数类型 [type]</p></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> PName(<span class="keyword">mode</span> paramenter <span class="keyword">type</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">SQL_statements;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">end</span> $</span><br></pre></td></tr></table></figure><blockquote><p>存储过程中每条语句结尾需要添加 <code>;</code></p><p>可通过 <code>delimiter</code> 重新设置存储过程的结束标识</p></blockquote><p><strong>调用过程</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> PName(<span class="keyword">parameters</span>);</span><br></pre></td></tr></table></figure><p>示例：</p><ul><li><code>in</code> 模式</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line">delimiter $ <span class="comment">#定义结束标志</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myp2(<span class="keyword">in</span> beautyName <span class="built_in">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> bo.*</span><br><span class="line">    <span class="keyword">from</span> boys bo</span><br><span class="line">    <span class="keyword">right</span> <span class="keyword">join</span> beauty b <span class="keyword">on</span> bo.id = b.boyfriend_id</span><br><span class="line">    <span class="keyword">where</span> beautyName = b.name ;</span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span>  myp2(<span class="string">'赵敏'</span>);</span><br></pre></td></tr></table></figure><ul><li><code>out</code> 模式</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myp3(<span class="keyword">in</span> beautyName <span class="built_in">varchar</span>(<span class="number">20</span>),<span class="keyword">out</span> boyName <span class="built_in">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> bo.boyName <span class="keyword">into</span> boyName</span><br><span class="line">    <span class="keyword">from</span> boys bo</span><br><span class="line">    <span class="keyword">inner</span> <span class="keyword">join</span> beauty b <span class="keyword">on</span> bo.id = b.boyfriend_id</span><br><span class="line">    <span class="keyword">where</span> beautyName = b.name;</span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> myp3(<span class="string">'小昭'</span>,@bName);<span class="comment">#调用</span></span><br><span class="line"><span class="keyword">select</span> @bName;</span><br></pre></td></tr></table></figure><p><strong>删除过程</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> PName;<span class="comment">#一次只能删除一个</span></span><br></pre></td></tr></table></figure><p><strong>查看过程</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">procedure</span> PName;</span><br></pre></td></tr></table></figure><p><strong>创建函数</strong></p><p>函数与存储过程相似，但有且仅有一个返回值</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> funcName(paramenter <span class="keyword">type</span>) <span class="keyword">returns</span> return_type <span class="comment">#声明</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">SQL_statements;</span><br><span class="line">...</span><br><span class="line">return </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><blockquote><p>错误1418：log_bin_trust_function_creators 变量为0时，用户不得创建或修改存储函数，将该变量设置为1即可： <code>set global log_bin_trust_function_creators=TRUE;</code></p></blockquote><p><strong>删除函数</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">function</span> funcName;<span class="comment">#一次只能删除一个</span></span><br></pre></td></tr></table></figure><p><strong>查看函数</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">function</span> funcName;</span><br></pre></td></tr></table></figure><hr /><h4 id="流程控制结构"><a class="markdownIt-Anchor" href="#流程控制结构"></a> 流程控制结构</h4><ul><li><p><strong>顺序结构</strong></p></li><li><p><strong>分支结构</strong>——&gt;<a href=".\MYSQL_1Linefunction.html#jump" target="_blank">函数介绍（流程控制函数）</a></p><ul><li><p><code>if(a,b,c)</code></p></li><li><p><code>if</code> 结构</p><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if condition1 then value1/statement1 ;</span><br><span class="line">else if condition2 then value1/statement2;</span><br><span class="line">...</span><br><span class="line">else value1/statement2;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br></pre></td></tr></table></figure></li><li><p><code>case</code> 结构</p><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#建立存储过程，按成绩显示等级</span></span><br><span class="line">delimiter $</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> grade(<span class="keyword">in</span> score <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">  <span class="keyword">when</span> score <span class="keyword">between</span> <span class="number">90</span> <span class="keyword">and</span> <span class="number">100</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">'A'</span>;</span><br><span class="line">  when score between 80 and 90 then <span class="keyword">select</span> <span class="string">'B'</span>;</span><br><span class="line">  when score between 60 and 80 then <span class="keyword">select</span> <span class="string">'c'</span>;</span><br><span class="line">  else <span class="keyword">select</span> <span class="string">'D'</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> grade(<span class="number">89</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>循环结构</strong></p><ul><li><p><code>while</code> 结构</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[tap:] while Condition1 <span class="keyword">do</span></span><br><span class="line">sql_statements;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">while</span> [tap];</span><br></pre></td></tr></table></figure></li><li><p><code>loop</code> 结构</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[tap:] loop</span><br><span class="line">sql_statements;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">loop</span> [tap];</span><br></pre></td></tr></table></figure></li><li><p><code>repeat</code> 结构</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[tap:] repeat</span><br><span class="line">sql_statements;</span><br><span class="line">...</span><br><span class="line">until end_Condition</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">repeat</span> [tap];</span><br></pre></td></tr></table></figure></li><li><p>退出语句</p><ul><li><code>iterate</code> ：开始下次循环【countinue】</li><li><code>leave</code>：结束当前所在循环【break】</li></ul></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;软件mysql&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#软件mysql&quot;&gt;&lt;/a&gt; 软件（MYSQL）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装、启动及登录 —— &lt;a href=&quot;./MYSQL_start.html&quot; target=&quot;</summary>
      
    
    
    
    <category term="MYSQL数据库" scheme="http://yoursite.com/categories/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MYSQL" scheme="http://yoursite.com/tags/MYSQL/"/>
    
    <category term="Databased" scheme="http://yoursite.com/tags/Databased/"/>
    
  </entry>
  
  <entry>
    <title>健身计划（一）</title>
    <link href="http://yoursite.com/posts/sport/%E5%81%A5%E8%BA%AB.html"/>
    <id>http://yoursite.com/posts/sport/%E5%81%A5%E8%BA%AB.html</id>
    <published>2021-08-14T09:21:21.000Z</published>
    <updated>2022-03-17T10:01:46.839Z</updated>
    
    <content type="html"><![CDATA[<h3 id="训练计划"><a class="markdownIt-Anchor" href="#训练计划"></a> 训练计划</h3><ul><li><p>训练时间表</p><table><thead><tr><th>周一</th><th>周二</th><th>周三</th><th>周四</th><th>周五</th><th>周六</th><th>周日</th></tr></thead><tbody><tr><td></td><td></td><td>胸背</td><td>腿臂</td><td></td><td>胸背</td><td>腿臂</td></tr></tbody></table></li><li><p>训练内容</p><p>根据推荐，但是因为一些动作个人觉得容易受伤，规避掉这些动作后安排了训练计划。</p><p><strong>RM：最大重复次数</strong></p><ul><li><p>高稳定复合：6-8RM</p><ul><li>杠铃深蹲、杠铃卧推</li></ul></li><li><p>常规复合：8-12RM</p><ul><li>器械动作、哑铃动作、坐姿划船</li></ul></li><li><p>单关节动作：13-15RM</p><ul><li>侧平举、面拉</li></ul></li></ul><table>        <tr>        <td rowspan="2">胸</td>        <td >哑铃卧推</td>        <td>3X8</td>    </tr>    <tr>        <td>斜上推举</td>        <td>4X12</td>    </tr>    <tr>        <td rowspan="3">背</td>         <td>高位下拉</td>        <td>4X12</td>    </tr>    <tr>        <td>坐姿划船</td>        <td>4X12</td>    </tr>      <tr>        <td>单臂划船</td>        <td>3X~（选做）</td>    </tr>    <tr>        <td rowspan="2">腿</td>        <td >深蹲</td>        <td>4X8</td>    </tr>    <tr>        <td>器械腿弯举 </td>        <td>4X8 </td>    </tr>    <tr>        <td rowspan="2">臂</td>        <td >侧平举</td>        <td>4X！</td>    </tr>    <tr>        <td>面拉</td>        <td>4X！</td>    </tr></table></li><li><p>训练阶段</p><ul><li><p>动作学习阶段</p><p>通过小重量多次数的训练熟悉动作，保持在最后一组完成后接近极限</p></li><li><p>重量控制阶段</p><p>从学习阶段缓慢过度，每次训练增加一些重量，指导做不动</p></li><li><p>容量增加阶段</p><p>复合动作根据重量控制时的训练容量，重新计算组次。掌握后</p></li></ul><table><thead><tr><th>动作学习</th><th>重量控制</th><th>容量增加</th></tr></thead><tbody><tr><td>2周</td><td>4周</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></td></tr><tr><td>X20</td><td>X10~12</td><td>x8~12</td></tr></tbody></table></li></ul><hr /><h3 id="注意事项"><a class="markdownIt-Anchor" href="#注意事项"></a> 注意事项</h3><h4 id="热身"><a class="markdownIt-Anchor" href="#热身"></a> 热身</h4><ul><li>预热5-10分钟</li></ul><p><strong>上肢热身</strong></p><ul><li><p>拉伸胸小肌，采用弹振式动态拉伸：压三秒，松1秒，左右各5次</p></li><li><p>伟大拉伸，手称腿5s，抬手5s，两边各1次。</p></li><li><p>绕肩，前后环绕10次</p></li><li><p>平板30s两组</p></li></ul><p><strong>下肢热身</strong></p><ul><li><p>伟大拉伸，</p></li><li><p>蛙趴</p></li><li><p>小腿拉伸</p></li><li><p>侧蹲，左右各10次</p></li><li><p>平板</p></li></ul><p>激活目标肌群热身组</p><p><strong>背部</strong></p><ul><li><p>运动时先收缩夹紧肩胛骨</p></li><li><p>控制手肘位置</p><p>不越过肩膀，与地面保持垂直</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;训练计划&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#训练计划&quot;&gt;&lt;/a&gt; 训练计划&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;训练时间表&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;周一&lt;/th&gt;
&lt;th&gt;周二&lt;/th&gt;
&lt;</summary>
      
    
    
    
    <category term="Sport" scheme="http://yoursite.com/categories/Sport/"/>
    
    
    <category term="运动" scheme="http://yoursite.com/tags/%E8%BF%90%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记——《穷富爸爸》</title>
    <link href="http://yoursite.com/posts/MutualFunds/%E7%A9%B7%E5%AF%8C%E7%88%B8%E7%88%B8.html"/>
    <id>http://yoursite.com/posts/MutualFunds/%E7%A9%B7%E5%AF%8C%E7%88%B8%E7%88%B8.html</id>
    <published>2021-07-15T04:27:32.000Z</published>
    <updated>2022-03-29T07:21:14.610Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>声明：我个人是秉承着改变对资产的态度以及认识投资的想法进行阅读的。因此以下笔记包含个人看法，并非完全书中观点。</p></blockquote><h4 id="关于财富"><a class="markdownIt-Anchor" href="#关于财富"></a> 关于财富</h4><ul><li><p><strong>理解资产</strong></p><p><strong>资产</strong>：预期会带来经济利益的资源（把钱放到口袋里的东西）</p><p><strong>负债</strong>：预期会导致经济利益流出的现时义务（把钱从口袋里取走的东西）</p><ul><li>书中提到通过不同人群的现金流向分析对到手的钱的处理方式，总结起来可以得到下面的一个流向图，分别描述了购入资产增值的收入和购入负债陷入财政陷阱的过程。</li></ul></li></ul><img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/%E8%B5%84%E4%BA%A7%E4%B8%8E%E8%B4%9F%E5%80%BA.jpg" width="800"><ul><li><p>对现金流的不理解可能会造成财务困境，重要的是明白自己选择支出的方式，这诞生了最初的”<strong>理财态度</strong>“</p><ul><li><p>如何花掉挣的钱</p></li><li><p>如何防止他人夺走</p></li><li><p>能多长时间拥有这笔钱</p></li><li><p>如何利用钱产生价值</p></li></ul></li><li><p>房子并非时刻是最优投资，在某种角度下，房屋可能是负债而非资产</p><ul><li><p>失去资产增值的机会</p></li><li><p>由于支付房屋而来的长期开支（诸如贷款）</p><blockquote><p>然而就目前国内房价增值速度来开，购入房屋更想是使用杠杆进行投资</p></blockquote></li></ul></li><li><p>引用巴安克敏斯顿·菲莱的话语 <strong>”财富是支撑一个人活多长时间的能力“（停止工作的情况下）</strong></p><p>我们可以认为，财富是通过资产产生的收入的现金流与支出的现金流进行比较而定的，进而有以下的几点认识：</p><ul><li><p>流入资产的项的资金越多，资产增值越快</p></li><li><p>把支出（包括负载产生的部分）控制在资产所能够产生的现金流之下，财富得到积累</p></li><li><p>尽量避免购入表面为资产的负债</p></li></ul></li></ul><h4 id="关于事业"><a class="markdownIt-Anchor" href="#关于事业"></a> 关于事业</h4><ul><li><p>关注事业，意思是构筑自己的资产项目</p><ul><li><p>事业与工作是有区别的，作为雇员进行生产时，要有意识地建立自己地资产项目，其中包括脱手盈利业务、股票等。</p></li><li><p>购入奢侈消费品前，应更优先建立资产。使用由资产产生的额外价值购入消费品，而非因欲望而购入表面资产的负债（比如贷款/收入抽成买豪车）</p></li></ul></li><li><p>注重财商</p><ul><li><p>税率是不可忽视的</p><p>不少一部分人会通过拥有一个自己的资产公司进而避免掉一些税费（公司收入税率比个人收入税率低）。</p><p>可以这样做的前提由很多，包括自身本身的知识储备（或通过雇佣专业人员获得），当通晓金融运转的原理及相关的法律知识后，能更加清楚地判断自己的行为，进而充分利用权利实现自己的事业。</p></li></ul></li></ul><h4 id="关于财商"><a class="markdownIt-Anchor" href="#关于财商"></a> 关于财商</h4><ul><li><p>财务智商（知识）</p><p>万丈高楼平地起，我们为将机会转变为财富，需要具备一定的财务智商，这使得我们需要对以下几个方面进行学习</p><ul><li><p>会计知识</p></li><li><p>投资知识</p></li><li><p>市场知识</p></li><li><p>法律知识</p></li></ul></li><li><p>思维的转变</p><ul><li><p>习惯变化，改变对投资的态度（接受风险）</p></li><li><p>认识自己的行为，通过知识降低风险，避免赌博心理</p></li><li><p>不要为了金钱而工作，工作是为了学习新知识</p></li><li><p>不要畏惧学习新东西</p></li></ul></li><li><p>抓住机会</p><p>一位优秀的投资者需要有组合机会的能力，为此要求的能力有以下几种</p><ul><li><p>寻找常人忽视的机会</p></li><li><p>融资能力</p></li><li><p>管理知识</p><ul><li>现金流管理</li><li>人事管理</li><li>个人时间管理</li></ul><p>*通过学习销售知识提高与人交往的能力 *</p></li></ul><blockquote><p>如果不能很好地去培养此类能力，最好成为普通投资者，进行常规投资（股票基金），以避免不必要的风险</p></blockquote></li></ul><h4 id="关于困难"><a class="markdownIt-Anchor" href="#关于困难"></a> 关于困难</h4><p>在投资/财富积累期间存在一定的障碍，克服这些障碍需要一定的努力。下面给出主要的一些障碍和克服的小方法和提示。</p><blockquote><p>实际上除了在投资方面，在处理其他的事情上，这些障碍依旧存在，且影响极大。</p></blockquote><ul><li><p>恐惧心理</p><p>人们总是害怕失败（失去金钱），这是正常的，但是需要正确的处理这种恐惧，讨厌失败和害怕失败之间有巨大的差距。减轻恐惧可以从下面的建议入手。</p><blockquote><p><strong>提早积累财富</strong>，通过风险较低的基金/股票投资的<strong>时间复利</strong>在退休前得到较多的财富积累。</p></blockquote></li><li><p>傲慢自负</p><p>不要通过夸夸其谈掩盖自己的无知，未知的部分往往使人损失金钱。</p><blockquote><p>承认知识上的缺失，进行学习或者雇佣/请教对应的专家</p></blockquote></li><li><p>愤世嫉俗</p><blockquote><p>避免抱怨现实，学会<strong>分析现实</strong></p></blockquote><blockquote><p>将注意力放在麻烦解决后的收益而非麻烦本身</p></blockquote></li><li><p>懒惰</p><p>人们通常借由“我很忙”这类借口去逃避一些不想要面对的事情，然而实际上并非很忙，仅仅是懒惰</p><blockquote><p>适当提高自己的<strong>欲望</strong>说服自己行动</p></blockquote></li><li><p>习惯</p><p>将自己放置于安稳状态的习惯可能会让人们失去动力、丧失抓住机会的筹码</p><blockquote><p>避免背上大额负债</p></blockquote><blockquote><p>改变支付习惯，优先投资于自己（包括资产投资、学习）<br />当资金紧缺时主动承受压力，暂时不要动用储蓄和投资，通过压力刺激自己的思维、能力提高（因人而异）</p></blockquote></li></ul><img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/%E6%94%AF%E4%BB%98%E4%BC%98%E5%85%88%E7%BA%A7.jpg" width="900"><h4 id="关于实践"><a class="markdownIt-Anchor" href="#关于实践"></a> 关于实践</h4><ul><li><p>作出自己地选择，并为之努力。进行阅读及学习，投资于头脑这一个最重要的资产</p></li><li><p>掌握一种模式，然后学习新的模式，具备快速学习的能力</p></li><li><p>优先投资在自己的事业上</p></li><li><p>给予专业人士更优的报酬以换取好的建议</p></li><li><p>时刻关注自己投资的回报（回收周期）</p></li><li><p>购买奢侈品时应该使用资产收益而非工作收入</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;声明：我个人是秉承着改变对资产的态度以及认识投资的想法进行阅读的。因此以下笔记包含个人看法，并非完全书中观点。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;关于财富&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#</summary>
      
    
    
    
    <category term="课外阅读" scheme="http://yoursite.com/categories/%E8%AF%BE%E5%A4%96%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="金融" scheme="http://yoursite.com/tags/%E9%87%91%E8%9E%8D/"/>
    
  </entry>
  
  <entry>
    <title>Matlab FIR及IIR 数字滤波器  (一)</title>
    <link href="http://yoursite.com/posts/DSP/digital_filter_1.html"/>
    <id>http://yoursite.com/posts/DSP/digital_filter_1.html</id>
    <published>2020-11-06T10:30:20.000Z</published>
    <updated>2022-03-29T07:19:55.972Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>前言:</p><p>本文为本人在学习华科&quot;数字信号分析理论与实践&quot;课程所做的记录, 由于本人能力有限,在实现方法等各方面存在问题,欢迎交流指出.</p><p>本文将介绍实现最简单的FIR数字滤波器(fir1函数) ,以及附带的滤波函数(filter)</p></blockquote><h3 id="fir-滤波器"><a class="markdownIt-Anchor" href="#fir-滤波器"></a> FIR 滤波器</h3><h4 id="原理分析"><a class="markdownIt-Anchor" href="#原理分析"></a> 原理分析</h4><blockquote><p>设计一个滤波器相当于设计一个系统,通过它的传递函数屏蔽掉不需要的输入信号,保留目标信息.</p></blockquote><p>​FIR(Finite Impulse Response)滤波器,即&quot;有限长单位冲激响应滤波器&quot;,其脉冲响应是有限的持续时间，并在有限的时间内稳定为零。</p><p>其傅立叶系数h(n)实际上就是数字滤波器的冲击响应.</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>k</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">h(k)=a(k),k=0,1,2,...,N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></span></p><p>其单边Z变换为</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>N</mi></munderover><mrow><msub><mi>a</mi><mi>k</mi></msub><msup><mi>Z</mi><mrow><mo>−</mo><mi>k</mi></mrow></msup></mrow></mrow><annotation encoding="application/x-tex">H(z)=\sum^N_{k=0}{a_kZ^{-k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.1304490000000005em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><strong>低通滤波器</strong></li></ul><p>理想的滤波器频率响应方程为1</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mi>d</mi></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">∣</mi><mi>ω</mi><mi mathvariant="normal">∣</mi><mo>≤</mo><msub><mi>ω</mi><mi>c</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>ω</mi><mo>&lt;</mo><mi mathvariant="normal">∣</mi><mi>ω</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>π</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">H_d(\omega)=\begin{cases}  1&amp; |\omega|\leq \omega_c \\0&amp; \omega&lt;|\omega|&lt;\pi\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mi>d</mi></msub><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><msub><mi>ω</mi><mi>c</mi></msub><mrow><mi>p</mi><mi>i</mi></mrow></mfrac><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>ω</mi><mi>c</mi></msub><mi>k</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>ω</mi><mi>c</mi></msub><mi>k</mi></mrow></mfrac><mo separator="true">;</mo><mi>k</mi><mo>=</mo><mn>0</mn><mo separator="true">;</mo><mo>±</mo><mn>1</mn><mo separator="true">,</mo><mo>±</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">h_d(k)=\frac{\omega_c}{pi}\frac{sin(\omega_ck)}{\omega_ck};k=0;\pm1,\pm2,..,\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.30744em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span></span></span></span></span></p><p>对系数进行归一化, 即</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>v</mi><mn>1</mn></msub><mo>=</mo><msub><mi>f</mi><mi>c</mi></msub><mi mathvariant="normal">/</mi><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>f</mi><mi>s</mi></msub></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mi>π</mi></mrow></mfrac><mo separator="true">;</mo><mtext> </mtext><mi>n</mi><mo>=</mo><mn>0</mn><mo separator="true">;</mo><mo>±</mo><mn>1</mn><mo separator="true">,</mo><mo>±</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}a_0 &amp;= v_1 = {f_c}/{\frac{1}{2}f_s}\\a_n &amp;= \frac{sin(n \pi v_1)}{n \pi};\ n=0;\pm1,\pm2,..,\infty\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.72044em;vertical-align:-2.11022em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.61022em;"><span style="top:-4.71578em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.3027800000000003em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.11022em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.61022em;"><span style="top:-4.71578em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.3027800000000003em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.11022em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><strong>高通滤波器</strong></li></ul><p>理想的滤波器频率响应方程, 及系数计算</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>H</mi><mi>d</mi></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">∣</mi><mi>ω</mi><mi mathvariant="normal">∣</mi><mo>≥</mo><msub><mi>ω</mi><mi>c</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mo>−</mo><msub><mi>v</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mi>π</mi></mrow></mfrac><mo separator="true">;</mo><mtext> </mtext><mi>n</mi><mo>=</mo><mn>0</mn><mo separator="true">;</mo><mo>±</mo><mn>1</mn><mo separator="true">,</mo><mo>±</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;H_d(\omega)=\begin{cases}  1&amp; |\omega|\geq \omega_c \\0&amp; other\end{cases}\\a_0 &amp;= 1-v_1 \\a_n &amp;= -\frac{sin(n \pi v_1)} {n \pi};\ n=0;\pm1,\pm2,..,\infty\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.213030000000002em;vertical-align:-3.356515000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><strong>带通系数</strong></li></ul><p>理想的滤波器频率响应方程,及系数计算</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>H</mi><mi>d</mi></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>ω</mi><mo>≤</mo><mi mathvariant="normal">∣</mi><mi>ω</mi><mi mathvariant="normal">∣</mi><mo>≤</mo><mi>π</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>v</mi><mn>2</mn></msub><mo>−</mo><msub><mi>v</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mi>π</mi></mrow></mfrac><mo separator="true">;</mo><mtext> </mtext><mi>n</mi><mo>=</mo><mn>0</mn><mo separator="true">;</mo><mo>±</mo><mn>1</mn><mo separator="true">,</mo><mo>±</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;H_d(\omega)=\begin{cases}  1&amp; \omega\leq|\omega|\leq\pi \\0&amp;other\end{cases}\\a_0 &amp;= v_2-v_1 \\a_n &amp;= \frac{sin(n \pi v_2)-sin(n \pi v_1)}{n \pi};\ n=0;\pm1,\pm2,..,\infty\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.213030000000002em;vertical-align:-3.356515000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>由于h(k)可能是无限长序列，是物理不可实现的,为此要寻找一个h(n)，在相应的误差准则下最近逼近h(k)。</p><ul><li><strong>带阻系数</strong></li></ul><p>理想的滤波器频率响应方程,及系数计算</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>H</mi><mi>d</mi></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>ω</mi><mo>≤</mo><mi mathvariant="normal">∣</mi><mi>ω</mi><mi mathvariant="normal">∣</mi><mo>≤</mo><mi>π</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mn>2</mn></msub><mo>−</mo><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mi>π</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mi>π</mi></mrow></mfrac><mo separator="true">;</mo><mtext> </mtext><mi>n</mi><mo>=</mo><mn>0</mn><mo separator="true">;</mo><mo>±</mo><mn>1</mn><mo separator="true">,</mo><mo>±</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;H_d(\omega)=\begin{cases}  0&amp; \omega\leq|\omega|\leq\pi \\1&amp;other\end{cases}\\a_0 &amp;= 1-(v_2-v_1) \\a_n &amp;= -\frac{sin(n \pi v_2)-sin(n \pi v_1)}{n \pi};\ n=0;\pm1,\pm2,..,\infty\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.213030000000002em;vertical-align:-3.356515000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8565150000000004em;"><span style="top:-5.856515em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.466485em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.3794849999999994em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">±</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.356515000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><strong>系数处理(窗函数法)</strong><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span> 可能是无限长序列，是物理不可实现的,为此要寻找一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，在相应的误差准则下最近逼近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>。</li><li>直接截取前n各系数, 故需要通过窗函数方法对系数进行平滑处理, 减小由于截断带来的跳动.</li></ul></li></ul><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>w</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">⋅</mo><mi>a</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(n)=w(n)·a(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></p><blockquote><p>本实现中默认使用汉宁(Hamming)窗函数对系数进行平滑处理.</p></blockquote><h4 id="程序实现"><a class="markdownIt-Anchor" href="#程序实现"></a> 程序实现</h4><p>首先进行进行输入参数的判断</p><ul><li>必须要输入的参数有<strong>采样点数目</strong><code>Np</code> ,<strong>相对截止频率</strong> <code>v</code> .其中<code>v</code>可以为二维数组</li><li>可选参数有 <strong>加窗类型</strong> (通过指针<code>p1</code>保存) , 滤波器类型(通过指针<code>p2</code>保存)</li></ul><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span> = <span class="title">firl_fun</span><span class="params">(Np,v,varargin)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% % 使用方法 </span></span><br><span class="line"><span class="comment">% % firl_fun(Np,v) N为取样点数目，低通滤波器，截止频率v*fs</span></span><br><span class="line"><span class="comment">% % firl_fun(Np,v,@wintype) 加窗类型wintype,如 @hamming</span></span><br><span class="line"><span class="comment">% % firl_fun(Np,v,type) 滤波方式type可选'high'高通,'low'低通</span></span><br><span class="line"><span class="comment">% % firl_fun(Np,v,@wintype,type)</span></span><br><span class="line"><span class="comment">% % firl_fun(Np,[v1,v2]) </span></span><br><span class="line"><span class="comment">% % firl_fun(Np,[v1,v2],type) 可选'bandpass'带通,'bandstop'带阻</span></span><br><span class="line"><span class="comment">% % firl_fun(Np,[v1,v2],@wintype,type)</span></span><br><span class="line"></span><br><span class="line">N = <span class="built_in">floor</span>(Np/<span class="number">2</span>);</span><br><span class="line">narginchk(<span class="number">2</span>,<span class="number">4</span>);<span class="comment">%检查输入参数个数</span></span><br><span class="line">p1 = @hamming; <span class="comment">%p1指向窗函数(默认汉宁)</span></span><br><span class="line">p2 = <span class="string">'low'</span>; <span class="comment">%p2指向滤波类型（默认低通）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%判断滤波类型</span></span><br><span class="line"><span class="keyword">switch</span> nargin</span><br><span class="line">    <span class="comment">%只有3个参数的判断，</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        <span class="keyword">if</span> isa(varargin&#123;<span class="number">1</span>&#125;,<span class="string">'function_handle'</span>)</span><br><span class="line">            p1 = varargin&#123;<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p2 = varargin&#123;<span class="number">1</span>&#125;;          </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="comment">%4参数读入    </span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        p1 = varargin&#123;<span class="number">1</span>&#125;;</span><br><span class="line">        p2 = varargin&#123;<span class="number">2</span>&#125;; </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>然后根据所选类型进行原理中的系数计算, 完成滤波器设计.</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">k=<span class="number">1</span>; </span><br><span class="line"><span class="comment">%判断滤波器类型</span></span><br><span class="line"><span class="keyword">switch</span> p2 </span><br><span class="line">    <span class="keyword">case</span> <span class="string">'low'</span>  <span class="comment">%低通</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=-N:N </span><br><span class="line">            f=<span class="built_in">i</span>*<span class="built_in">pi</span>; </span><br><span class="line">            h(k)=<span class="built_in">sin</span>(v(<span class="number">1</span>)*f)/f; <span class="comment">%计算响应函数</span></span><br><span class="line">            k=k+<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        h(N+<span class="number">1</span>)=v(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'high'</span> <span class="comment">%高通</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=-N:N </span><br><span class="line">            f=<span class="built_in">i</span>*<span class="built_in">pi</span>; </span><br><span class="line">            h(k)=-<span class="built_in">sin</span>(v(<span class="number">1</span>)*f)/f; </span><br><span class="line">            k=k+<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        h(N+<span class="number">1</span>)=<span class="number">1</span>-v(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'bandpass'</span> <span class="comment">%带通</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=-N:N </span><br><span class="line">            f=<span class="built_in">i</span>*<span class="built_in">pi</span>; </span><br><span class="line">            h(k)=(<span class="built_in">sin</span>(v(<span class="number">2</span>)*f)-<span class="built_in">sin</span>(v(<span class="number">1</span>)*f))/f; </span><br><span class="line">            k=k+<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">        h(N+<span class="number">1</span>)=v(<span class="number">2</span>)-v(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'bandstop'</span> <span class="comment">%带通阻止</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=-N:N </span><br><span class="line">            f=<span class="built_in">i</span>*<span class="built_in">pi</span>; </span><br><span class="line">            h(k)=-(<span class="built_in">sin</span>(v(<span class="number">2</span>)*f)-<span class="built_in">sin</span>(v(<span class="number">1</span>)*f))/f; </span><br><span class="line">            k=k+<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">        h(N+<span class="number">1</span>)=<span class="number">1</span>-(v(<span class="number">2</span>)-v(<span class="number">1</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">b = h.*p1(<span class="number">2</span>*N+<span class="number">1</span>)';<span class="comment">% -N:N的长度为2N+1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="实际效果"><a class="markdownIt-Anchor" href="#实际效果"></a> 实际效果</h4><p>低通、高通</p><center> <figure> <img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/FIR_low.png" style="zoom:50%"/> <img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/FIR_high.png" style="zoom:50%" /> </figure> </center>带通、带阻<center> <figure>   <img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/FIR_bandpass.png" style="zoom:50%"/>     <img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/FIR_bandstop.png" style="zoom:50%" /> </figure> </center>#### 测试代码<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">clear;</span><br><span class="line"><span class="comment">%设计的样本 %原信号</span></span><br><span class="line">Fs = <span class="number">2048</span>;</span><br><span class="line">dt=<span class="number">1.0</span>/Fs;</span><br><span class="line">T =<span class="number">1</span>; N=T/dt;</span><br><span class="line">t=[<span class="number">0</span>:N<span class="number">-1</span>]/N;</span><br><span class="line"></span><br><span class="line">x1 =<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">50</span>*t)+<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">300</span>*t) +<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">500</span>*t);</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>); </span><br><span class="line"><span class="built_in">plot</span>(t,x1); </span><br><span class="line">axis([<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">-2</span>,<span class="number">2</span>]);</span><br><span class="line">title(<span class="string">"原信号时域"</span>); </span><br><span class="line"></span><br><span class="line">P=fft(x1,N);</span><br><span class="line">Pyy =<span class="number">2</span>*<span class="built_in">sqrt</span>(P.* <span class="built_in">conj</span>(P))/N;</span><br><span class="line">f=<span class="built_in">linspace</span>(<span class="number">0</span>,Fs/<span class="number">2</span>,N/<span class="number">2</span>);</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">plot</span>(f,Pyy(<span class="number">1</span>:N/<span class="number">2</span>));</span><br><span class="line">title(<span class="string">"原信号频域"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%选择滤波器</span></span><br><span class="line"><span class="built_in">type</span> = <span class="number">4</span>;</span><br><span class="line"><span class="comment">%--------------------------系统自带fir1 和filter</span></span><br><span class="line"><span class="keyword">switch</span> <span class="built_in">type</span> </span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> </span><br><span class="line">        b = fir1(<span class="number">48</span>,<span class="number">0.1</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span> </span><br><span class="line">        b = fir1(<span class="number">48</span>,<span class="number">0.1</span>,<span class="string">'high'</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        b = fir1(<span class="number">48</span>,[<span class="number">0.1</span>,<span class="number">0.3</span>]);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        b = fir1(<span class="number">48</span>,[<span class="number">0.1</span>,<span class="number">0.3</span>],<span class="string">'stop'</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">x2= filter(b,<span class="number">1</span>,x1);</span><br><span class="line"></span><br><span class="line"><span class="comment">%------------------------自己写的fir1_fun 和 filter_fun</span></span><br><span class="line"><span class="keyword">switch</span> <span class="built_in">type</span> </span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> </span><br><span class="line">        b2 = firl_fun(<span class="number">48</span>,<span class="number">0.1</span>,@hamming);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span> </span><br><span class="line">        b2 = firl_fun(<span class="number">48</span>,<span class="number">0.1</span>,@hamming,<span class="string">'high'</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        b2 = firl_fun(<span class="number">48</span>,[<span class="number">0.1</span>,<span class="number">0.3</span>],@hamming,<span class="string">'bandpass'</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        b2 = firl_fun(<span class="number">48</span>,[<span class="number">0.1</span>,<span class="number">0.3</span>],@hamming,<span class="string">'bandstop'</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">x3= filter_fun(b2,<span class="number">1</span>,x1);</span><br><span class="line"></span><br><span class="line"><span class="comment">%--------------------------（自带滤波器频域图）</span></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">[h,w] = freqz(b,<span class="number">1</span>,<span class="number">512</span>);</span><br><span class="line"><span class="built_in">plot</span>(w/<span class="built_in">pi</span>,<span class="built_in">abs</span>(h),<span class="string">'linewidth'</span>,<span class="number">1</span>)</span><br><span class="line">title(<span class="string">"Matlab的滤波器频域图"</span>); </span><br><span class="line"><span class="comment">%--------------------------（自带滤波器处理后）</span></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line"><span class="built_in">plot</span>(t,x2);</span><br><span class="line">axis([<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">-2</span>,<span class="number">2</span>]);</span><br><span class="line">title(<span class="string">"Matlab的滤波器处理后"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">%--------------------------（编写的滤波器频域图）</span></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">[h,w] = freqz(b2,<span class="number">1</span>,<span class="number">512</span>);</span><br><span class="line"><span class="built_in">plot</span>(w/<span class="built_in">pi</span>,<span class="built_in">abs</span>(h),<span class="string">'linewidth'</span>,<span class="number">1</span>)</span><br><span class="line">title(<span class="string">"自写的滤波器频域图"</span>); </span><br><span class="line"><span class="comment">%--------------------------（编写的滤波器处理后）</span></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">6</span>);</span><br><span class="line"><span class="built_in">plot</span>(t,x3);</span><br><span class="line">axis([<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">-2</span>,<span class="number">2</span>]);</span><br><span class="line">title(<span class="string">"自写的滤波器处理后"</span>);</span><br></pre></td></tr></table></figure><hr /><h3 id="滤波器的实现"><a class="markdownIt-Anchor" href="#滤波器的实现"></a> 滤波器的实现</h3><h4 id="原理分析-2"><a class="markdownIt-Anchor" href="#原理分析-2"></a> 原理分析</h4><p>按照Matlab的原理解释</p><div align = center> <img src="https://yushen-blog.oss-cn-guangzhou.aliyuncs.com/img/Fir_filter.png"  style="zoom:70%;" /></div><p>那实现就很简单了</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">y</span>= <span class="title">filter_fun</span><span class="params">(b,a,f)</span></span></span><br><span class="line"><span class="comment">%这个滤波实际上就是把现有数据当作输入，滤波公式当作系统传递函数</span></span><br><span class="line"><span class="comment">%FIR时，利用卷积求出系统响应就好了，所及这个就相当于一个卷积算法。</span></span><br><span class="line"><span class="comment">%FII时，利用就根据差分方程计算出来。</span></span><br><span class="line">n = <span class="built_in">length</span>(b);</span><br><span class="line">m = <span class="built_in">length</span>(f);</span><br><span class="line">na = <span class="built_in">length</span>(a)<span class="number">-1</span>;<span class="comment">%分母最高阶次数</span></span><br><span class="line">S = <span class="built_in">zeros</span>(<span class="number">1</span>,m);<span class="comment">%卷积结果存放</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%t=1:n-1 时为开头过度段，缺位补零相乘，求和时相当于没有该项</span></span><br><span class="line"><span class="comment">%t=n:m-1 时，按照卷积公式滑动求和</span></span><br><span class="line"><span class="comment">%t=m:m+n-1 时，时为尾部过度段，与 t=2:n 类似。</span></span><br><span class="line"><span class="keyword">for</span> t=<span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    S(t) = sum(f(<span class="number">1</span>:t).*<span class="built_in">fliplr</span>(b(<span class="number">1</span>:t))) ;</span><br><span class="line">    <span class="keyword">if</span> na &gt;<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> t &gt; na</span><br><span class="line">            S(t) = S(t) - sum( <span class="built_in">fliplr</span>(a(<span class="number">2</span>:na+<span class="number">1</span>)).*S(t<span class="number">-1</span>:t-na));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            S(t) = S(t) - sum( <span class="built_in">fliplr</span>(a(<span class="number">2</span>:t)).*S(<span class="number">1</span>:t<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> t = n:m<span class="number">-1</span></span><br><span class="line">    S(t) = sum(f(t-n+<span class="number">1</span>:t).*<span class="built_in">fliplr</span>(b(<span class="number">1</span>:n)));</span><br><span class="line">    <span class="keyword">if</span> na &gt;<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> t &gt; na</span><br><span class="line">            S(t) = S(t) - sum( <span class="built_in">fliplr</span>(a(<span class="number">2</span>:na+<span class="number">1</span>)).*S(t-na:t<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            S(t) = S(t) - sum( <span class="built_in">fliplr</span>(a(<span class="number">2</span>:t)).*S(<span class="number">1</span>:t<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">y = S;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;前言:&lt;/p&gt;
&lt;p&gt;本文为本人在学习华科&amp;quot;数字信号分析理论与实践&amp;quot;课程所做的记录, 由于本人能力有限,在实现方法等各方面存在问题,欢迎交流指出.&lt;/p&gt;
&lt;p&gt;本文将介绍实现最简单的FIR数字滤波器(fir1函数) ,以及附带</summary>
      
    
    
    
    <category term="信号处理" scheme="http://yoursite.com/categories/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/"/>
    
    
    <category term="信号处理" scheme="http://yoursite.com/tags/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/"/>
    
    <category term="Matlab" scheme="http://yoursite.com/tags/Matlab/"/>
    
  </entry>
  
</feed>
